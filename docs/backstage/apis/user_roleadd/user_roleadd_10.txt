
mysql> select * from bs_user_role where user_id=8;
+----+---------+---------+--------+------------+---------------------+---------------------+
| id | user_id | role_id | status | creator_id | created_at          | updated_at          |
+----+---------+---------+--------+------------+---------------------+---------------------+
| 16 |       8 |      10 |      0 |          2 | 2020-05-25 14:53:23 | 2020-05-25 17:29:04 |
| 18 |       8 |      11 |      0 |          2 | 2020-05-25 15:27:46 | 2020-05-25 17:29:04 |
+----+---------+---------+--------+------------+---------------------+---------------------+
2 rows in set (0.00 sec)

mysql> select * from bs_user_role where user_id=2;
+----+---------+---------+--------+------------+---------------------+---------------------+
| id | user_id | role_id | status | creator_id | created_at          | updated_at          |
+----+---------+---------+--------+------------+---------------------+---------------------+
|  2 |       2 |       2 |      1 |          0 | 2020-05-14 15:29:22 | 2020-05-14 18:24:37 |
|  3 |       2 |      10 |      1 |          0 | 2020-05-18 14:02:41 | 2020-05-18 14:02:41 |
|  5 |       2 |      11 |      1 |          0 | 2020-05-18 14:20:24 | 2020-05-18 14:20:24 |
|  7 |       2 |      12 |      1 |          0 | 2020-05-18 16:16:05 | 2020-05-18 16:16:05 |
|  8 |       2 |      13 |      1 |          0 | 2020-05-18 17:24:04 | 2020-05-18 17:24:04 |
| 11 |       2 |      14 |      1 |          0 | 2020-05-18 18:31:28 | 2020-05-18 18:31:28 |
+----+---------+---------+--------+------------+---------------------+---------------------+
6 rows in set (0.00 sec)
mysql>

2 user1
acab5999cd838f05bb541e7f3c05a799
{
    "user_id":8,
    "role_ids":[9,10,11]
}


{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/user/roleadd{\"role_ids\":[9,10,11],\"user_id\":8}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-05-26T18:00:40+08:00"}
{"level":"debug","msg":"server sign: acab5999cd838f05bb541e7f3c05a799, \tuser sign: acab5999cd838f05bb541e7f3c05a799","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:00:40+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/roleadd JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:00:40+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkwNTczNTUzLCJuYmYiOjE1OTA0ODY4NTMsImlhdCI6MTU5MDQ4NzE1MywianRpIjoiMDVhZDIzZTEtMDE2MS00ODE1LThjYjgtMWYzNDY1ZDA1YzM3IiwidXNlcl9pZCI6Mn0.5xBZBm0qX6I6SnhsJlHXPy_jNqph6PIJLMIBpEEnkc0","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:00:40+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/roleadd middleware Casbin 验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:00:40+08:00"}
{"level":"debug","msg":"userService RoleAdd req={UserId:8 RoleIds:[9 10 11]}","source":"user.go:290:handler.(*userHandler).RoleAdd.func1","time":"2020-05-26T18:00:40+08:00"}
2020/05/26 18:00:40 Request: 2, /api/v1/user/roleadd, POST ---> true
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user_role.go:6227.923msSELECT * FROM `bs_user_role`  WHERE (status=? AND user_id=?)[1 2] 6","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:00:40+08:00"}
{"level":"debug","msg":"userRoleRepo GetNormalByUserId list=[{ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST} {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST} {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST} {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST} {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST} {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}]","source":"user.go:266:service.(*userService).RoleAdd","time":"2020-05-26T18:00:40+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7022.9429msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[2] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:00:40+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7019.7944msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[10] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:00:40+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7023.0165msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[11] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:00:40+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7026.8971msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[12] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:00:40+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7025.8976msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[13] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:00:40+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7029.3303msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[14] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:00:40+08:00"}
{"level":"debug","msg":"userRoleRepo GetNormalByUserId normalList=[{ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST} {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST} {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST} {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST} {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST} {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}]","source":"user.go:266:service.(*userService).RoleAdd","time":"2020-05-26T18:00:40+08:00"}




userRoleRepo GetNormalByUserId list=[
    {ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST}
    {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST}
    {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST}
    {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST}
    {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}
    {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}
]
userRoleRepo GetNormalByUserId normalList=[
    {ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST}
    {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST}
    {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST}
    {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST}
    {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}
    {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}
]


mysql> select * from bs_role where id=14;
+----+---------+-------------+------------+------+---------------------+---------------------+
| id | name    | role_status | creator_id | desc | created_at          | updated_at          |
+----+---------+-------------+------------+------+---------------------+---------------------+
| 14 | 编辑4   |           1 |          2 |      | 2020-05-18 18:31:28 | 2020-05-18 18:31:28 |
+----+---------+-------------+------------+------+---------------------+---------------------+
1 row in set (0.00 sec)

mysql> update bs_role set role_status=0 where id=14;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from bs_role where id=14;
+----+---------+-------------+------------+------+---------------------+---------------------+
| id | name    | role_status | creator_id | desc | created_at          | updated_at          |
+----+---------+-------------+------------+------+---------------------+---------------------+
| 14 | 编辑4   |           0 |          2 |      | 2020-05-18 18:31:28 | 2020-05-26 18:03:43 |
+----+---------+-------------+------------+------+---------------------+---------------------+
1 row in set (0.00 sec)

mysql>


{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/user/roleadd{\"role_ids\":[9,10,11],\"user_id\":8}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-05-26T18:04:01+08:00"}
{"level":"debug","msg":"server sign: acab5999cd838f05bb541e7f3c05a799, \tuser sign: acab5999cd838f05bb541e7f3c05a799","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:04:01+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/roleadd JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:04:01+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkwNTczNTUzLCJuYmYiOjE1OTA0ODY4NTMsImlhdCI6MTU5MDQ4NzE1MywianRpIjoiMDVhZDIzZTEtMDE2MS00ODE1LThjYjgtMWYzNDY1ZDA1YzM3IiwidXNlcl9pZCI6Mn0.5xBZBm0qX6I6SnhsJlHXPy_jNqph6PIJLMIBpEEnkc0","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:04:01+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/roleadd middleware Casbin 验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:04:01+08:00"}
{"level":"debug","msg":"userService RoleAdd req={UserId:8 RoleIds:[9 10 11]}","source":"user.go:290:handler.(*userHandler).RoleAdd.func1","time":"2020-05-26T18:04:01+08:00"}
2020/05/26 18:04:01 Request: 2, /api/v1/user/roleadd, POST ---> true
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user_role.go:6219.9637msSELECT * FROM `bs_user_role`  WHERE (status=? AND user_id=?)[1 2] 6","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:04:01+08:00"}
{"level":"debug","msg":"userRoleRepo GetNormalByUserId list=[{ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST} {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST} {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST} {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST} {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST} {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}]","source":"user.go:266:service.(*userService).RoleAdd","time":"2020-05-26T18:04:01+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7019.929msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[2] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:04:01+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7018.1971msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[10] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:04:01+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7019.1066msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[11] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:04:01+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7019.0253msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[12] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:04:01+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7018.8292msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[13] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:04:01+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7019.1631msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[14] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:04:01+08:00"}
{"level":"debug","msg":"userRoleRepo GetNormalByUserId normalList=[{ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST} {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST} {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST} {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST} {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}]","source":"user.go:266:service.(*userService).RoleAdd","time":"2020-05-26T18:04:01+08:00"}





userRoleRepo GetNormalByUserId list=[
    {ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST}
    {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST}
    {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST}
    {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST}
    {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}
    {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}
]
userRoleRepo GetNormalByUserId normalList=[
    {ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST}
    {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST}
    {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST}
    {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST}
    {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}
]


mysql> update bs_role set role_status=0 where id=11;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from bs_role where id=11;
+----+---------+-------------+------------+------+---------------------+---------------------+
| id | name    | role_status | creator_id | desc | created_at          | updated_at          |
+----+---------+-------------+------------+------+---------------------+---------------------+
| 11 | 审核2   |           0 |          2 |      | 2020-05-18 14:20:24 | 2020-05-26 18:05:48 |
+----+---------+-------------+------------+------+---------------------+---------------------+
1 row in set (0.00 sec)

mysql> select * from bs_user_role where user_id=2;
+----+---------+---------+--------+------------+---------------------+---------------------+
| id | user_id | role_id | status | creator_id | created_at          | updated_at          |
+----+---------+---------+--------+------------+---------------------+---------------------+
|  2 |       2 |       2 |      1 |          0 | 2020-05-14 15:29:22 | 2020-05-14 18:24:37 |
|  3 |       2 |      10 |      1 |          0 | 2020-05-18 14:02:41 | 2020-05-18 14:02:41 |
|  5 |       2 |      11 |      1 |          0 | 2020-05-18 14:20:24 | 2020-05-18 14:20:24 |
|  7 |       2 |      12 |      1 |          0 | 2020-05-18 16:16:05 | 2020-05-18 16:16:05 |
|  8 |       2 |      13 |      1 |          0 | 2020-05-18 17:24:04 | 2020-05-18 17:24:04 |
| 11 |       2 |      14 |      1 |          0 | 2020-05-18 18:31:28 | 2020-05-18 18:31:28 |
+----+---------+---------+--------+------------+---------------------+---------------------+
6 rows in set (0.00 sec)

mysql>



{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/user/roleadd{\"role_ids\":[9,10,11],\"user_id\":8}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-05-26T18:06:26+08:00"}
{"level":"debug","msg":"server sign: acab5999cd838f05bb541e7f3c05a799, \tuser sign: acab5999cd838f05bb541e7f3c05a799","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:06:26+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/roleadd JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:06:26+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkwNTczNTUzLCJuYmYiOjE1OTA0ODY4NTMsImlhdCI6MTU5MDQ4NzE1MywianRpIjoiMDVhZDIzZTEtMDE2MS00ODE1LThjYjgtMWYzNDY1ZDA1YzM3IiwidXNlcl9pZCI6Mn0.5xBZBm0qX6I6SnhsJlHXPy_jNqph6PIJLMIBpEEnkc0","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:06:26+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/roleadd middleware Casbin 验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-05-26T18:06:26+08:00"}
{"level":"debug","msg":"userService RoleAdd req={UserId:8 RoleIds:[9 10 11]}","source":"user.go:290:handler.(*userHandler).RoleAdd.func1","time":"2020-05-26T18:06:26+08:00"}
2020/05/26 18:06:26 Request: 2, /api/v1/user/roleadd, POST ---> true
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user_role.go:6223.9346msSELECT * FROM `bs_user_role`  WHERE (status=? AND user_id=?)[1 2] 6","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:06:26+08:00"}
{"level":"debug","msg":"userRoleRepo GetNormalByUserId list=[{ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST} {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST} {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST} {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST} {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST} {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}]","source":"user.go:266:service.(*userService).RoleAdd","time":"2020-05-26T18:06:26+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7020.947msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[2] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:06:26+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7019.9447msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[10] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:06:26+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7020.3358msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[11] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:06:26+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7023.9329msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[12] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:06:26+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7023.0795msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[13] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:06:26+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/role.go:7023.1127msSELECT * FROM `bs_role`  WHERE (id=?) ORDER BY `bs_role`.`id` ASC LIMIT 1[14] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-26T18:06:26+08:00"}
{"level":"debug","msg":"userRoleRepo GetNormalByUserId normalList=[{ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST} {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST} {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST} {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}]","source":"user.go:266:service.(*userService).RoleAdd","time":"2020-05-26T18:06:26+08:00"}



userRoleRepo GetNormalByUserId list=[
    {ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST}
    {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST}
    {ID:5 UserId:2 RoleId:11 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:20:24 +0800 CST UpdatedAt:2020-05-18 14:20:24 +0800 CST}
    {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST}
    {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}
    {ID:11 UserId:2 RoleId:14 Status:1 CreatorId:0 CreatedAt:2020-05-18 18:31:28 +0800 CST UpdatedAt:2020-05-18 18:31:28 +0800 CST}
]
userRoleRepo GetNormalByUserId normalList=[
    {ID:2 UserId:2 RoleId:2 Status:1 CreatorId:0 CreatedAt:2020-05-14 15:29:22 +0800 CST UpdatedAt:2020-05-14 18:24:37 +0800 CST}
    {ID:3 UserId:2 RoleId:10 Status:1 CreatorId:0 CreatedAt:2020-05-18 14:02:41 +0800 CST UpdatedAt:2020-05-18 14:02:41 +0800 CST}
    {ID:7 UserId:2 RoleId:12 Status:1 CreatorId:0 CreatedAt:2020-05-18 16:16:05 +0800 CST UpdatedAt:2020-05-18 16:16:05 +0800 CST}
    {ID:8 UserId:2 RoleId:13 Status:1 CreatorId:0 CreatedAt:2020-05-18 17:24:04 +0800 CST UpdatedAt:2020-05-18 17:24:04 +0800 CST}
]

