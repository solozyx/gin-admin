
user9 修改用户信息

1cd062ef8589c9113a8b803d0d5370c8
{

}
{
    "code": 20201,
    "msg": "必填参数不可为空; 用户信息修改,参数不能全为空"
}

c23c477f5d3ea5c5da1bc895207099c7
{
	"name":"user8"
}
{
    "code": 20113,
    "msg": "用户信息修改错误; Error 1062: Duplicate entry 'user8' for key 'index_name'"
}


{
	"name":"user9new",
	"real_name":"姓名9new"
}
{
    "code": 0,
    "msg": "SUCCESS",
    "data": {
        "id": 10,
        "department_id": 1,
        "name": "user9new",
        "real_name": "姓名9new",
        "email": "user9@email.com",
        "phone": "18800000009",
        "user_status": 1,
        "creator_id": 2,
        "desc": "备注描述9",
        "created_at": "2020-05-20T16:57:16+08:00",
        "updated_at": "2020-05-21T16:15:16.5562824+08:00"
    }
}

mysql> select * from bs_user where id=10;
+----+----------+------------------------------------------+------------+-----------------+-------------+-------------+------------+---------------+---------------+---------------------+---------------------+
| id | name     | password                                 | real_name  | email           | phone       | user_status | creator_id | department_id | desc          | created_at          | updated_at          |
+----+----------+------------------------------------------+------------+-----------------+-------------+-------------+------------+---------------+---------------+---------------------+---------------------+
| 10 | user9new | 2ceaf92638986db196e4973e718b58c19bda80df | 姓名9new   | user9@email.com | 18800000009 |           1 |          2 |             1 | 备注描述9     | 2020-05-20 16:57:16 | 2020-05-21 16:15:17 |
+----+----------+------------------------------------------+------------+-----------------+-------------+-------------+------------+---------------+---------------+---------------------+---------------------+
1 row in set (0.00 sec)
mysql>


{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/user/edit{\"name\":\"user9new\",\"real_name\":\"姓名9new\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-05-21T16:15:16+08:00"}
{"level":"debug","msg":"server sign: 0e0de903482a80a551e554299f97620e, \tuser sign: 0e0de903482a80a551e554299f97620e","source":"context.go:161:gin.(*Context).Next","time":"2020-05-21T16:15:16+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/edit JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-05-21T16:15:16+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkwMTE4ODc1LCJuYmYiOjE1OTAwMzIxNzUsImlhdCI6MTU5MDAzMjQ3NSwianRpIjoiZDMxM2UzZDUtNDQwMi00ZWExLTgwOWMtODcxZmZhMGU1OTkxIiwidXNlcl9pZCI6MTB9.gYe_WnXi16ohTODS7X1oBuM7ArsJlvJlHcG-bjAXLFU","source":"context.go:161:gin.(*Context).Next","time":"2020-05-21T16:15:16+08:00"}
{"level":"debug","msg":"request uri=/api/v1/user/edit middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-05-21T16:15:16+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:11724.9322msSELECT * FROM `bs_user`  WHERE (id=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[10] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-21T16:15:16+08:00"}
{"level":"debug","msg":"userRepo Edit begin user=\u0026{
ID:10 DepartmentId:1 Name:111 Password:2ceaf92638986db196e4973e718b58c19bda80df RealName:姓名9
Email:user9@email.com Phone:18800000009 UserStatus:1 CreatorId:2 Desc:备注描述9
CreatedAt:2020-05-20 16:57:16 +0800 CST UpdatedAt:2020-05-21 16:12:10 +0800 CST}","source":"user.go:209:service.(*userService).Edit","time":"2020-05-21T16:15:16+08:00"}

{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:14024.9297msUPDATE `bs_user` SET `department_id` = ?, `name` = ?, `password` = ?, `real_name` = ?, `email` = ?, `phone` = ?, `user_status` = ?, `creator_id` = ?, `desc` = ?, `created_at` = ?, `updated_at` = ?  WHERE `bs_user`.`id` = ?[1 user9new 2ceaf92638986db196e4973e718b58c19bda80df 姓名9new user9@email.com 18800000009 1 2 备注描述9 2020-05-20 16:57:16 +0800 CST 2020-05-21 16:15:16.5562824 +0800 CST m=+288.648908701 10] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-21T16:15:16+08:00"}
{"level":"debug","msg":"userRepo Edit end user=\u0026
{ID:10 DepartmentId:1 Name:user9new Password:2ceaf92638986db196e4973e718b58c19bda80df RealName:姓名9new
Email:user9@email.com Phone:18800000009 UserStatus:1 CreatorId:2 Desc:备注描述9
CreatedAt:2020-05-20 16:57:16 +0800 CST UpdatedAt:2020-05-21 16:15:16.5562824 +0800 CST m=+288.648908701}",
"source":"user.go:209:service.(*userService).Edit","time":"2020-05-21T16:15:16+08:00"}

