
root

{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/department/create{\"desc\":\"部门2描述\",\"email\":\"dep2@email.com\",\"name\":\"部门2\",\"phone\":\"18800000001\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-05-22T15:38:29+08:00"}
{"level":"debug","msg":"server sign: 93f9cea718a68a9731399e8f728005cd, \tuser sign: 93f9cea718a68a9731399e8f728005cd","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:38:29+08:00"}
{"level":"debug","msg":"request uri=/api/v1/department/create JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:38:29+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkwMjE5Mjg2LCJuYmYiOjE1OTAxMzI1ODYsImlhdCI6MTU5MDEzMjg4NiwianRpIjoiNDk4MjM3MmUtMTAxNC00N2VjLTg2ZGMtYTNhZjczM2UzNzQ4IiwidXNlcl9pZCI6MX0.Zuof0PVHpsZf31iw5sQdHElgwfMMzvBrhXX45PkVNxQ","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:38:29+08:00"}
{"level":"debug","msg":"request uri=/api/v1/department/create middleware Casbin 验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:38:29+08:00"}
{"level":"debug","msg":"departmentService Create req={Name:部门2 Email:dep2@email.com Phone:18800000001 Desc:部门2描述}","source":"department.go:31:handler.(*departmentHandler).Create.func1","time":"2020-05-22T15:38:29+08:00"}
2020/05/22 15:38:29 Request: 1, /api/v1/department/create, POST ---> true
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/department.go:2618.9479msINSERT INTO `bs_department` (`name`,`email`,`phone`,`department_status`,`creator_id`,`desc`,`created_at`,`updated_at`) VALUES (?,?,?,?,?,?,?,?)[部门2 dep2@email.com 18800000001 1 1 部门2描述 2020-05-22 15:38:29.1216168 +0800 CST m=+707.036522301 2020-05-22 15:38:29.1315908 +0800 CST m=+707.046496301] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-05-22T15:38:29+08:00"}


user1

{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/department/create{\"desc\":\"部门2描述\",\"email\":\"dep2@email.com\",\"name\":\"部门2\",\"phone\":\"18800000001\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-05-22T15:37:01+08:00"}
{"level":"debug","msg":"server sign: 93f9cea718a68a9731399e8f728005cd, \tuser sign: 93f9cea718a68a9731399e8f728005cd","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:37:01+08:00"}
{"level":"debug","msg":"request uri=/api/v1/department/create JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:37:01+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkwMjE4OTE0LCJuYmYiOjE1OTAxMzIyMTQsImlhdCI6MTU5MDEzMjUxNCwianRpIjoiNGY0NjQ5NDItODFmNS00YTJmLTk5ZTItOTEzNzA4NGVjZjhjIiwidXNlcl9pZCI6Mn0.lF-h7TKs4PVoIz6h9cWJ2id_tpUdqDicvmr91c47O9E","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:37:01+08:00"}
{"level":"debug","msg":"request uri=/api/v1/department/create middleware Casbin 验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:37:01+08:00"}
{"level":"info","msg":"用户无此权限 userId=%!s(int=2) path=/api/v1/department/create method=POST","source":"context.go:161:gin.(*Context).Next","time":"2020-05-22T15:37:01+08:00"}
2020/05/22 15:37:01 Request: 2, /api/v1/department/create, POST ---> false
