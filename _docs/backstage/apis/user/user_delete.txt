
mysql> select id,real_name,email,phone,user_status,creator_id,organization_id,department_id,`desc` from bs_user where id=11;
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| id | real_name | email            | phone       | user_status | creator_id | organization_id | department_id | desc           |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| 11 | 姓名10    | user10@email.com | 18800000010 |           0 |          1 |               0 |             1 | 备注描述10     |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
1 row in set (0.00 sec)
mysql>


b236ddb223ad3a2b0bfc23f9ca52ec2d
{
    "user_id":11
}
{
    "code": 20116,
    "msg": "待处理的账号已被冻结; "
}


mysql> update bs_user set user_status=2 where id=11;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql> select id,real_name,email,phone,user_status,creator_id,organization_id,department_id,`desc` from bs_user where id=11;
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| id | real_name | email            | phone       | user_status | creator_id | organization_id | department_id | desc           |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| 11 | 姓名10    | user10@email.com | 18800000010 |           2 |          1 |               0 |             1 | 备注描述10     |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
1 row in set (0.00 sec)
mysql>


{
    "code": 20117,
    "msg": "待处理的账号已被删除; "
}


update bs_user set user_status=1 where id=11;

mysql> update bs_user set user_status=1 where id=11;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql> select id,real_name,email,phone,user_status,creator_id,organization_id,department_id,`desc` from bs_user where id=11;
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| id | real_name | email            | phone       | user_status | creator_id | organization_id | department_id | desc           |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| 11 | 姓名10    | user10@email.com | 18800000010 |           1 |          1 |               0 |             1 | 备注描述10     |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
1 row in set (0.00 sec)
mysql>

{
    "code": 0,
    "msg": "SUCCESS",
    "data": {
        "id": 11,
        "real_name": "姓名10",
        "email": "user10@email.com",
        "phone": "18800000010",
        "user_status": 2,
        "creator_id": 1,
        "organization_id": 0,
        "department_id": 1,
        "desc": "备注描述10",
        "created_at": "2020-05-22T17:03:35+08:00",
        "updated_at": "2020-07-06T14:27:01.6638226+08:00"
    }
}


mysql> select id,real_name,email,phone,user_status,creator_id,organization_id,department_id,`desc` from bs_user where id=11;
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| id | real_name | email            | phone       | user_status | creator_id | organization_id | department_id | desc           |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
| 11 | 姓名10    | user10@email.com | 18800000010 |           2 |          1 |               0 |             1 | 备注描述10     |
+----+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------------+
1 row in set (0.00 sec)
mysql>


> use backstage
switched to db backstage
> db.operate_log.find().sort({_id:-1}).limit(1).pretty()
{
	"_id" : ObjectId("5f02c4356adcd65a20898379"),
	"user_id" : 1,
	"real_name" : "总行行长",
	"organization_id" : 1,
	"department_id" : 0,
	"operate" : "删除成员:姓名10",
	"path" : "/api/v1/user/delete",
	"method" : "POST",
	"ip" : "127.0.0.1",
	"hazard_level" : 2,
	"created_at" : "2020-07-06T14:27:01+08:00"
}
>
