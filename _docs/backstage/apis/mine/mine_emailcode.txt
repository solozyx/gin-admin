
mysql> select * from bs_user where id=13;
+----+------------------------------------------+-----------+---------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| id | password                                 | real_name | email               | phone       | user_status | creator_id | organization_id | department_id | desc     | created_at          | updated_at          |
+----+------------------------------------------+-----------+---------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| 13 | 05f581227d10eac0d6c25d41252c5f1625613bf8 | 姓名12    | 18813141886@163.com | 18813141012 |           1 |          1 |               0 |             0 | 用户12   | 2020-06-16 16:12:01 | 2020-06-19 10:58:26 |
+----+------------------------------------------+-----------+---------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
1 row in set (0.00 sec)
mysql>


4d9d8fd9027959163d70f4d6f26cae91
{
    "email":"18813141886@163.com"
}
{
    "code": 20106,
    "msg": "该邮箱已被绑定,请尝试其他邮箱; 18813141886@163.com"
}


{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T14:15:20+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:15:20+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:15:20+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkyNTMzODgzLCJuYmYiOjE1OTI0NDcxODMsImlhdCI6MTU5MjQ0NzQ4MywianRpIjoiNjEyNjAxZGQtNmUzNS00Y2VlLTkyOGUtNmE3Y2NiNjAzNGRlIiwidXNlcl9pZCI6MTN9.DjjFb2OqEkzd3HH1z3dxpx-sQ4x0TNTQXJNfLeEsEZo","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:15:20+08:00"}
{"level":"error","msg":"parse JWT token fail. error: jwt: exp claim is invalid","source":"auth.go:33:middleware.AuthCheck.func1","time":"2020-06-24T14:15:20+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:15:20+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T14:15:20+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:12666.8311msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141886@163.com] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-24T14:15:20+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=18813141886@163.com user=\u0026{ID:13 Password:05f581227d10eac0d6c25d41252c5f1625613bf8 RealName:姓名12 Email:18813141886@163.com Phone:18813141012 UserStatus:1 CreatorId:1 OrganizationId:0 DepartmentId:0 Desc:用户12 CreatedAt:2020-06-16 16:12:01 +0800 CST UpdatedAt:2020-06-19 10:58:26 +0800 CST}","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:15:20+08:00"}
{"level":"error","msg":"该邮箱已被绑定,请尝试其他邮箱; 18813141886@163.com","source":"casbin.go:38:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-24T14:15:20+08:00"}



mysql> update bs_user set `email`='18813141886@163.cn' where id=13;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql>
mysql> select * from bs_user where id=13;
+----+------------------------------------------+-----------+--------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| id | password                                 | real_name | email              | phone       | user_status | creator_id | organization_id | department_id | desc     | created_at          | updated_at          |
+----+------------------------------------------+-----------+--------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| 13 | 05f581227d10eac0d6c25d41252c5f1625613bf8 | 姓名12    | 18813141886@163.cn | 18813141012 |           1 |          1 |               0 |             0 | 用户12   | 2020-06-16 16:12:01 | 2020-06-24 14:21:58 |
+----+------------------------------------------+-----------+--------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
1 row in set (0.00 sec)
mysql>




{
    "email":"18813141886@163.com"
}
{
    "code": 0,
    "msg": "SUCCESS"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T14:23:22+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:23:22+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:23:22+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:23:22+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T14:23:22+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:12624.9335msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141886@163.com] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-24T14:23:22+08:00"}
{"level":"error","msg":"userRepo VerifyEmail email=18813141886@163.com error=record not found","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:23:22+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=18813141886@163.com 可以使用","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:23:22+08:00"}
{"level":"error","msg":"userRepo SetVerifyCode 获取验证码 GetVerifyCode error=not found","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:23:22+08:00"}
{"level":"debug","msg":"userRepo SetVerifyCode 写入验证码1成功","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:23:22+08:00"}





{
    "email":"18813141886@163.com"
}
{
    "code": 20103,
    "msg": "验证码还在有效期内; 18813141886@163.com"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T14:25:13+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:25:13+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:25:13+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:25:13+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T14:25:13+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:12622.9375msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141886@163.com] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-24T14:25:13+08:00"}
{"level":"error","msg":"userRepo VerifyEmail email=18813141886@163.com error=record not found","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:25:13+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=18813141886@163.com 可以使用","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:25:13+08:00"}
{"level":"error","msg":"验证码还在有效期内; 18813141886@163.com","source":"casbin.go:38:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-24T14:25:13+08:00"}


> show databases
MzDB               0.012GB
MzDailyPropList    0.000GB
MzTestDB           0.000GB
admin              0.000GB
config             0.000GB
local              0.000GB
mgo_investigation  0.000GB
mgo_order          0.000GB
user_data_temp     0.000GB
>
>
> show databases
MzDB               0.012GB
MzDailyPropList    0.000GB
MzTestDB           0.000GB
admin              0.000GB
backstage          0.000GB
config             0.000GB
local              0.000GB
mgo_investigation  0.000GB
mgo_order          0.000GB
user_data_temp     0.000GB
>
> use backstage
switched to db backstage
>
> show tables
verify_code
>
> db.verify_code.find()
{ "_id" : ObjectId("5ef2f15a6adcd63e3c16e665"), "code" : "306883", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:23:22.619Z") }
>


{
    "code": 0,
    "msg": "SUCCESS"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T14:30:36+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:30:36+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:30:36+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:30:36+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T14:30:36+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:12623.9343msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141886@163.com] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-24T14:30:36+08:00"}
{"level":"error","msg":"userRepo VerifyEmail email=18813141886@163.com error=record not found","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:30:36+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=18813141886@163.com 可以使用","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:30:36+08:00"}
{"level":"debug","msg":"userRepo SetVerifyCode 写入验证码2成功","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:30:36+08:00"}

> db.verify_code.find()
{ "_id" : ObjectId("5ef2f15a6adcd63e3c16e665"), "code" : "306883", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:23:22.619Z") }
>
> db.verify_code.find()
{ "_id" : ObjectId("5ef2f30c6adcd62728236441"), "code" : "867935", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:30:36.287Z") }
>


{
    "code": 20103,
    "msg": "验证码还在有效期内; 18813141886@163.com"
}


{
    "code": 0,
    "msg": "SUCCESS"
}
> db.verify_code.find()
>
> db.verify_code.find()
{ "_id" : ObjectId("5ef2f5a66adcd63f0c61d525"), "code" : "273254", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:41:42.761Z") }
>

{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T14:41:42+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:41:42+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:41:42+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:41:42+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T14:41:42+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:12625.93msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141886@163.com] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-24T14:41:42+08:00"}
{"level":"error","msg":"userRepo VerifyEmail email=18813141886@163.com error=record not found","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:41:42+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=18813141886@163.com 可以使用","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:41:42+08:00"}
{"level":"error","msg":"userRepo SetVerifyCode 获取验证码 GetVerifyCode error=not found","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:41:42+08:00"}
{"level":"debug","msg":"userRepo SetVerifyCode 写入验证码1成功","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:41:42+08:00"}



{
    "code": 20103,
    "msg": "验证码还在有效期内; 18813141886@163.com"
}
> db.verify_code.find()
{ "_id" : ObjectId("5ef2f5a66adcd63f0c61d525"), "code" : "273254", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:41:42.761Z") }
>

{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T14:42:32+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:42:32+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:42:32+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:42:32+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T14:42:32+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:12623.9361msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141886@163.com] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-24T14:42:32+08:00"}
{"level":"error","msg":"userRepo VerifyEmail email=18813141886@163.com error=record not found","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:42:32+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=18813141886@163.com 可以使用","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:42:32+08:00"}
{"level":"debug","msg":"userRepo SetVerifyCode accountNo=18813141886@163.com 验证码还在有效期内","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:42:32+08:00"}
{"level":"error","msg":"验证码还在有效期内; 18813141886@163.com","source":"casbin.go:38:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-24T14:42:32+08:00"}


{
    "code": 0,
    "msg": "SUCCESS"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T14:43:45+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:43:45+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:43:45+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T14:43:45+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T14:43:45+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:12622.9388msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141886@163.com] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-24T14:43:45+08:00"}
{"level":"error","msg":"userRepo VerifyEmail email=18813141886@163.com error=record not found","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:43:45+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=18813141886@163.com 可以使用","source":"mine.go:169:service.(*mineService).EmailCode","time":"2020-06-24T14:43:45+08:00"}
{"level":"error","msg":"userRepo SetVerifyCode 获取验证码 GetVerifyCode error=not found","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:43:45+08:00"}
{"level":"debug","msg":"userRepo SetVerifyCode 写入验证码1成功","source":"mine.go:175:service.(*mineService).EmailCode","time":"2020-06-24T14:43:45+08:00"}

> db.verify_code.find()
{ "_id" : ObjectId("5ef2f5a66adcd63f0c61d525"), "code" : "273254", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:41:42.761Z") }
>
>
> db.verify_code.find()
{ "_id" : ObjectId("5ef2f6216adcd63f0c61d526"), "code" : "653798", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:43:45.267Z") }
>


> db.verify_code.find()
{ "_id" : ObjectId("5ef2f6216adcd63f0c61d526"), "code" : "653798", "account_no" : "18813141886@163.com", "created_at" : ISODate("2020-06-24T06:43:45.267Z") }
>
> db.verify_code.find()
>


{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T18:17:55+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T18:17:55+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T18:17:55+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T18:17:55+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T18:17:55+08:00"}
{"level":"error","msg":"userRepo SetVerifyCode 获取验证码 accountNo=18813141886@163.com error=not found","source":"mine.go:185:service.(*mineService).EmailCode","time":"2020-06-24T18:17:55+08:00"}
{"level":"debug","msg":"userRepo SetVerifyCode 写入验证码1成功","source":"mine.go:185:service.(*mineService).EmailCode","time":"2020-06-24T18:17:55+08:00"}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/emailcode{\"email\":\"18813141886@163.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-24T18:18:08+08:00"}
{"level":"debug","msg":"server sign: 4d9d8fd9027959163d70f4d6f26cae91, \tuser sign: 4d9d8fd9027959163d70f4d6f26cae91","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T18:18:08+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T18:18:08+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/emailcode middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-24T18:18:08+08:00"}
{"level":"debug","msg":"mineService EmailCode req={Email:18813141886@163.com}","source":"mine.go:179:handler.(*mineHandler).EmailCode.func1","time":"2020-06-24T18:18:08+08:00"}
{"level":"debug","msg":"userRepo SetVerifyCode accountNo=18813141886@163.com 验证码还在有效期内","source":"mine.go:185:service.(*mineService).EmailCode","time":"2020-06-24T18:18:08+08:00"}
{"level":"error","msg":"验证码还在有效期内; 18813141886@163.com","source":"casbin.go:39:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-24T18:18:08+08:00"}

