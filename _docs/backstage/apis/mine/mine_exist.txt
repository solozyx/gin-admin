
mysql> select * from bs_user where id=13;
+----+------------------------------------------+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| id | password                                 | real_name | email            | phone       | user_status | creator_id | organization_id | department_id | desc     | created_at          | updated_at          |
+----+------------------------------------------+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| 13 | 51f22a1d702815e72b593ca36de88a9c9999e57a | 姓名12    | user12@email.com | 18813141012 |           1 |          1 |               0 |             0 | 用户12   | 2020-06-16 16:12:01 | 2020-06-16 16:12:01 |
+----+------------------------------------------+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
1 row in set (0.00 sec)
mysql>

{
	"account_no":"user12@email.com"
}
{
    "code": 0,
    "msg": "SUCCESS"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/exist{\"account_no\":\"user12@email.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-16T17:53:14+08:00"}
{"level":"debug","msg":"server sign: 16d0e96899674a653d1e72d882806d8b, \tuser sign: 16d0e96899674a653d1e72d882806d8b","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:53:14+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:53:14+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:53:14+08:00"}
{"level":"debug","msg":"mineService Exist req={AccountNo:user12@email.com}","source":"mine.go:31:handler.(*mineHandler).Exist.func1","time":"2020-06-16T17:53:14+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:4021.9389msSELECT * FROM `bs_user`  WHERE (phone=? OR email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[user12@email.com user12@email.com] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-16T17:53:14+08:00"}
{"level":"debug","msg":"userRepo accountNo=user12@email.com user=\u0026{ID:13 Password:51f22a1d702815e72b593ca36de88a9c9999e57a RealName:姓名12 Email:user12@email.com Phone:18813141012 UserStatus:1 CreatorId:1 OrganizationId:0 DepartmentId:0 Desc:用户12 CreatedAt:2020-06-16 16:12:01 +0800 CST UpdatedAt:2020-06-16 16:12:01 +0800 CST}","source":"mine.go:56:service.(*mineService).Exist","time":"2020-06-16T17:53:14+08:00"}


{
	"account_no":"18813141012"
}
{
    "code": 0,
    "msg": "SUCCESS"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/exist{\"account_no\":\"18813141012\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-16T17:55:24+08:00"}
{"level":"debug","msg":"server sign: c55e4ae3b2b3042ab83a3d6c9e55db5d, \tuser sign: c55e4ae3b2b3042ab83a3d6c9e55db5d","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:55:24+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:55:24+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:55:24+08:00"}
{"level":"debug","msg":"mineService Exist req={AccountNo:18813141012}","source":"mine.go:31:handler.(*mineHandler).Exist.func1","time":"2020-06-16T17:55:24+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:4037.8995msSELECT * FROM `bs_user`  WHERE (phone=? OR email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141012 18813141012] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-16T17:55:24+08:00"}
{"level":"debug","msg":"userRepo accountNo=18813141012 user=\u0026{ID:13 Password:51f22a1d702815e72b593ca36de88a9c9999e57a RealName:姓名12 Email:user12@email.com Phone:18813141012 UserStatus:1 CreatorId:1 OrganizationId:0 DepartmentId:0 Desc:用户12 CreatedAt:2020-06-16 16:12:01 +0800 CST UpdatedAt:2020-06-16 16:12:01 +0800 CST}","source":"mine.go:56:service.(*mineService).Exist","time":"2020-06-16T17:55:24+08:00"}

update bs_user set user_status=0 where id=13;

mysql> update bs_user set user_status=0 where id=13;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql>

{
	"account_no":"18813141012"
}
{
    "code": 20114,
    "msg": "您的账号已被冻结; 18813141012"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/exist{\"account_no\":\"18813141012\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-16T17:57:42+08:00"}
{"level":"debug","msg":"server sign: c55e4ae3b2b3042ab83a3d6c9e55db5d, \tuser sign: c55e4ae3b2b3042ab83a3d6c9e55db5d","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:57:42+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:57:42+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T17:57:42+08:00"}
{"level":"debug","msg":"mineService Exist req={AccountNo:18813141012}","source":"mine.go:31:handler.(*mineHandler).Exist.func1","time":"2020-06-16T17:57:42+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:4028.9241msSELECT * FROM `bs_user`  WHERE (phone=? OR email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141012 18813141012] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-16T17:57:42+08:00"}
{"level":"error","msg":"您的账号已被冻结; 18813141012","source":"casbin.go:34:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-16T17:57:42+08:00"}


mysql> update bs_user set user_status=2 where id=13;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql>


{
	"account_no":"18813141012"
}
{
    "code": 20115,
    "msg": "您的账号已被删除; 18813141012"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/exist{\"account_no\":\"18813141012\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-16T18:06:05+08:00"}
{"level":"debug","msg":"server sign: c55e4ae3b2b3042ab83a3d6c9e55db5d, \tuser sign: c55e4ae3b2b3042ab83a3d6c9e55db5d","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T18:06:05+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T18:06:05+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T18:06:05+08:00"}
{"level":"debug","msg":"mineService Exist req={AccountNo:18813141012}","source":"mine.go:31:handler.(*mineHandler).Exist.func1","time":"2020-06-16T18:06:05+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:4031.9152msSELECT * FROM `bs_user`  WHERE (phone=? OR email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18813141012 18813141012] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-16T18:06:05+08:00"}
{"level":"debug","msg":"userRepo accountNo=18813141012 user=\u0026{ID:13 Password:51f22a1d702815e72b593ca36de88a9c9999e57a RealName:姓名12 Email:user12@email.com Phone:18813141012 UserStatus:2 CreatorId:1 OrganizationId:0 DepartmentId:0 Desc:用户12 CreatedAt:2020-06-16 16:12:01 +0800 CST UpdatedAt:2020-06-16 17:58:39 +0800 CST}","source":"mine.go:56:service.(*mineService).Exist","time":"2020-06-16T18:06:05+08:00"}
{"level":"error","msg":"您的账号已被删除; 18813141012","source":"casbin.go:34:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-16T18:06:05+08:00"}


{
	"account_no":"18713141012"
}
{
    "code": 20102,
    "msg": "账号不存在; 18713141012"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/exist{\"account_no\":\"18713141012\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-16T18:06:56+08:00"}
{"level":"debug","msg":"server sign: 3cdb8e3f65571e32664ebaa7692fb065, \tuser sign: 3cdb8e3f65571e32664ebaa7692fb065","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T18:06:56+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist JWT 不验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T18:06:56+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/exist middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-16T18:06:56+08:00"}
{"level":"debug","msg":"mineService Exist req={AccountNo:18713141012}","source":"mine.go:31:handler.(*mineHandler).Exist.func1","time":"2020-06-16T18:06:56+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:4021.94msSELECT * FROM `bs_user`  WHERE (phone=? OR email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[18713141012 18713141012] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-16T18:06:56+08:00"}
{"level":"error","msg":"userRepo Exist accountNo=18713141012 error=record not found","source":"mine.go:56:service.(*mineService).Exist","time":"2020-06-16T18:06:56+08:00"}
{"level":"error","msg":"账号不存在; 18713141012","source":"casbin.go:34:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-16T18:06:56+08:00"}

