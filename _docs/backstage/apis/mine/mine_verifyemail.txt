
mysql> select * from bs_user where id=13;
+----+------------------------------------------+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| id | password                                 | real_name | email            | phone       | user_status | creator_id | organization_id | department_id | desc     | created_at          | updated_at          |
+----+------------------------------------------+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
| 13 | 51f22a1d702815e72b593ca36de88a9c9999e57a | 姓名12    | user12@email.com | 18813141012 |           1 |          1 |               0 |             0 | 用户12   | 2020-06-16 16:12:01 | 2020-06-16 18:59:20 |
+----+------------------------------------------+-----------+------------------+-------------+-------------+------------+-----------------+---------------+----------+---------------------+---------------------+
1 row in set (0.00 sec)
mysql>

879196ed3d9028b1cc873938da9591a9
{
    "email":"user12@email.com"
}
{
    "code": 20105,
    "msg": "该邮箱已被绑定，请尝试其他邮箱; user12@email.com"
}

{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/verifyemail{\"email\":\"user12@email.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-17T14:43:17+08:00"}
{"level":"debug","msg":"server sign: 879196ed3d9028b1cc873938da9591a9, \tuser sign: 879196ed3d9028b1cc873938da9591a9","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:43:17+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/verifyemail JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:43:17+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkyNDQ4MjE4LCJuYmYiOjE1OTIzNjE1MTgsImlhdCI6MTU5MjM2MTgxOCwianRpIjoiZjRiODZiZmUtODVhNy00ZDBhLTkwMjktMGMwMjAwODQ4MWJlIiwidXNlcl9pZCI6MTN9._mdQ481nujDYy57Bh6p8hGbv6bJXrQ0U0JAcDJnd7rg","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:43:17+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/verifyemail middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:43:17+08:00"}
{"level":"debug","msg":"mineService VerifyEmail req={Email:user12@email.com}","source":"mine.go:142:handler.(*mineHandler).VerifyEmail.func1","time":"2020-06-17T14:43:17+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:11125.951msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[user12@email.com] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-17T14:43:17+08:00"}
{"level":"debug","msg":"userRepo VerifyEmail email=user12@email.com user=\u0026{ID:13 Password:51f22a1d702815e72b593ca36de88a9c9999e57a RealName:姓名12 Email:user12@email.com Phone:18813141012 UserStatus:1 CreatorId:1 OrganizationId:0 DepartmentId:0 Desc:用户12 CreatedAt:2020-06-16 16:12:01 +0800 CST UpdatedAt:2020-06-16 18:59:20 +0800 CST}","source":"mine.go:147:service.(*mineService).VerifyEmail","time":"2020-06-17T14:43:17+08:00"}
{"level":"error","msg":"该邮箱已被绑定，请尝试其他邮箱; user12@email.com","source":"casbin.go:36:middleware.CasbinVerifyUserPermission.func1","time":"2020-06-17T14:43:17+08:00"}


aa24c92cec9e170033dc2fb51a8f9283
{
    "email":"user13@email.com"
}
{
    "code": 0,
    "msg": "SUCCESS"
}
{"level":"debug","msg":"sign before: POST127.0.0.1:3000/api/v1/mine/verifyemail{\"email\":\"user13@email.com\"}1234567890com.obencn.secondchase.3671e28d-e384-49e6-9cea-4d8cb80288d4","source":"head.go:116:middleware.Options","time":"2020-06-17T14:44:51+08:00"}
{"level":"debug","msg":"server sign: aa24c92cec9e170033dc2fb51a8f9283, \tuser sign: aa24c92cec9e170033dc2fb51a8f9283","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:44:51+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/verifyemail JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:44:51+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkyNDQ4MjE4LCJuYmYiOjE1OTIzNjE1MTgsImlhdCI6MTU5MjM2MTgxOCwianRpIjoiZjRiODZiZmUtODVhNy00ZDBhLTkwMjktMGMwMjAwODQ4MWJlIiwidXNlcl9pZCI6MTN9._mdQ481nujDYy57Bh6p8hGbv6bJXrQ0U0JAcDJnd7rg","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:44:51+08:00"}
{"level":"debug","msg":"request uri=/api/v1/mine/verifyemail middleware Casbin 不验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-06-17T14:44:51+08:00"}
{"level":"debug","msg":"mineService VerifyEmail req={Email:user13@email.com}","source":"mine.go:142:handler.(*mineHandler).VerifyEmail.func1","time":"2020-06-17T14:44:51+08:00"}
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/user.go:11123.9373msSELECT * FROM `bs_user`  WHERE (email=?) ORDER BY `bs_user`.`id` ASC LIMIT 1[user13@email.com] 0","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-06-17T14:44:51+08:00"}
{"level":"error","msg":"userRepo VerifyEmail email=user13@email.com error=record not found","source":"mine.go:147:service.(*mineService).VerifyEmail","time":"2020-06-17T14:44:51+08:00"}

