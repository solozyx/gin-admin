
mysql> select id,real_name,email,phone,user_status,creator_id,organization_id,department_id,`desc` from bs_user where id=1;
+----+--------------+----------------+-------------+-------------+------------+-----------------+---------------+-----------------+
| id | real_name    | email          | phone       | user_status | creator_id | organization_id | department_id | desc            |
+----+--------------+----------------+-------------+-------------+------------+-----------------+---------------+-----------------+
|  1 | 总行行长     | root@email.com | 18813141001 |           1 |          0 |               1 |             0 | 系统管理员      |
+----+--------------+----------------+-------------+-------------+------------+-----------------+---------------+-----------------+
1 row in set (0.00 sec)
mysql>

root
{
	"account_no":"root@email.com",
	"password":"asdf1234"
}
{
    "code": 0,
    "msg": "SUCCESS",
    "data": {
        "access_token": "eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkzNzcwOTk5LCJuYmYiOjE1OTM2ODQyOTksImlhdCI6MTU5MzY4NDU5OSwianRpIjoiZjFjMzVhODctY2JmZS00YjlkLTg2MjgtOGZmYWVlNjUzNjQ4IiwidXNlcl9pZCI6MX0.X0z-RN_rsBtdy2cPP2ATm-1R3-RJM5_5gGJ0Bnvcvok",
        "refresh_token": "eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJiYWNrc3RhZ2UuZ2F0ZXdheSIsInN1YiI6IlJlZnJlc2hUb2tlbiIsImF1ZCI6Imh0dHBzOi8vYmFja3N0YWdlLm9iZW5jbi5jb20iLCJleHAiOjE1OTYyNzY1OTksIm5iZiI6MTU5MzY4NDI5OSwiaWF0IjoxNTkzNjg0NTk5LCJqdGkiOiI5MzBkODcyZi1hNTk4LTRiZWMtOTEzMC1mNWUwNmZlNjM0MTUiLCJ1c2VyX2lkIjoxfQ.MWosgI5cJIYIS5eJrR2SwZCWF5VxSuDjl4Zn8KEglSo",
        "user_info": {
            "id": 1,
            "real_name": "总行行长",
            "email": "root@email.com",
            "phone": "18813141001",
            "creator_id": 0,
            "organization_id": 1,
            "department_id": 0,
            "org_name": "总行",
            "dep_name": "",
            "desc": "系统管理员",
            "created_at": "2020-05-12T14:58:40+08:00",
            "updated_at": "2020-07-02T18:07:05+08:00"
        }
    }
}



{
	"name":"上海分行"
}
{
    "code": 0,
    "msg": "SUCCESS",
    "data": {
        "id": 3,
        "name": "上海分行",
        "level": 2,
        "email": "",
        "phone": "",
        "org_status": 1,
        "creator_id": 1,
        "desc": "",
        "created_at": "2020-07-02T18:15:11.6136988+08:00",
        "updated_at": "2020-07-02T18:15:11.6296555+08:00"
    }
}

mysql> select * from bs_organization where id=3;
+----+--------------+-------+-------+-------+------------+------------+------+---------------------+---------------------+
| id | name         | level | email | phone | org_status | creator_id | desc | created_at          | updated_at          |
+----+--------------+-------+-------+-------+------------+------------+------+---------------------+---------------------+
|  3 | 上海分行     |     2 |       |       |          1 |          1 |      | 2020-07-02 18:15:12 | 2020-07-02 18:15:12 |
+----+--------------+-------+-------+-------+------------+------------+------+---------------------+---------------------+
1 row in set (0.00 sec)
mysql>



{"level":"debug","msg":"sign before: POST127.0.0.1:9001/api/v1/org/create{\"name\":\"上海分行\"}1234567890com.obencn.backstage.c27d32c5-c878-470a-8a6f-107f7d3700dd","source":"head.go:116:middleware.Options","time":"2020-07-02T18:15:11+08:00"}
{"level":"debug","msg":"server sign: 71b02a7f5252a8821d48f53922142133, \tuser sign: 71b02a7f5252a8821d48f53922142133","source":"context.go:161:gin.(*Context).Next","time":"2020-07-02T18:15:11+08:00"}
{"level":"debug","msg":"request uri=/api/v1/org/create JWT 验证token","source":"context.go:161:gin.(*Context).Next","time":"2020-07-02T18:15:11+08:00"}
{"level":"debug","msg":"request token=eyJhbGciOiJIUzI1NiIsImN0eSI6IkpXVCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzZWNvbmRjaGFzZS5nYXRld2F5Iiwic3ViIjoiQWNjZXNzVG9rZW4iLCJhdWQiOiJodHRwczovL2JhY2tzdGFnZS5vYmVuY24uY29tIiwiZXhwIjoxNTkzNzcwOTk5LCJuYmYiOjE1OTM2ODQyOTksImlhdCI6MTU5MzY4NDU5OSwianRpIjoiZjFjMzVhODctY2JmZS00YjlkLTg2MjgtOGZmYWVlNjUzNjQ4IiwidXNlcl9pZCI6MX0.X0z-RN_rsBtdy2cPP2ATm-1R3-RJM5_5gGJ0Bnvcvok","source":"context.go:161:gin.(*Context).Next","time":"2020-07-02T18:15:11+08:00"}
{"level":"debug","msg":"request uri=/api/v1/org/create middleware Casbin 验证权限","source":"context.go:161:gin.(*Context).Next","time":"2020-07-02T18:15:11+08:00"}
2020/07/02 18:15:11 Request: 1, /api/v1/org/create, POST ---> true
{"level":"info","msg":"sqlC:/oben/project/backstage/repository/organization.go:3039.893msINSERT INTO `bs_organization` (`name`,`level`,`email`,`phone`,`org_status`,`creator_id`,`desc`,`created_at`,`updated_at`) VALUES (?,?,?,?,?,?,?,?,?)[上海分行 2   1 1  2020-07-02 18:15:11.6136988 +0800 CST m=+317.868153501 2020-07-02 18:15:11.6296555 +0800 CST m=+317.884110201] 1","source":"scope.go:1047:gorm.(*Scope).trace","time":"2020-07-02T18:15:11+08:00"}

