
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:493:490]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:14:11]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:275:272]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:490:487]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:19:16]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:185:182]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:460:457]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:461:458]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:381:378]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:488:485]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:53:50]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:486:483]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:487:484]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:452:449]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:459:456]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"GetUserRemain from Redis userId=555 remain=1","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:25:41{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.lY6RBBo8 {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\345\\234\\250\\344\\270\\200\\350\\265\\267\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\231\\272\\346\\271\\203***\\347\\247\\221\\346\\212\\200\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***HJ\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***MA\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***yt\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***sr\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***Tp\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***\\345\\210\\253\\344\\272\\272\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\277\\203\\344\\272\\213***\\344\\270\\203\\345\\274\\246\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\236\\253\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\217\\267*\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***60\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***21\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***VN\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\256\\235\\350\\264\\235***\\346\\212\\261\\346\\224\\271\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\360\\237\\222\\213\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***xe\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\350\\241\\214\\345\\220\\247***\\350\\241\\214\\345\\220\\247\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***50\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e LeftNum:1  {} [] 1309}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-01T19:25:41+08:00"}
2020/7/1 下午7:30:14{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.OI3kWQUs {555 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T19:30:14+08:00"}
2020/7/1 下午7:30:14{"level":"info","msg":"sql/app/repository/task_repo.go:18809.365µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-01T19:30:14+08:00"}
2020/7/1 下午7:30:14{"level":"info","msg":"sql/app/repository/task_repo.go:732.028881msSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-01 2 555] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-01T19:30:14+08:00"}
2020/7/1 下午7:30:14{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-01T19:30:14+08:00"}
2020/7/1 下午7:30:14{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.OI3kWQUs{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T19:30:14+08:00"}
2020/7/1 下午7:32:58{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.FVjjQJCJ {555 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T19:32:58+08:00"}
2020/7/1 下午7:32:58{"level":"info","msg":"sql/app/repository/task_repo.go:18788.19µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-01T19:32:58+08:00"}
2020/7/1 下午7:32:58{"level":"info","msg":"sql/app/repository/task_repo.go:73891.331µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-01 2 555] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-01T19:32:58+08:00"}
2020/7/1 下午7:32:58{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-01T19:32:58+08:00"}
2020/7/1 下午7:32:58{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.FVjjQJCJ{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T19:32:58+08:00"}
2020/7/1 下午7:43:42{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.jcc6x2Dc {555 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T19:43:42+08:00"}
2020/7/1 下午7:43:42{"level":"info","msg":"sql/app/repository/task_repo.go:18773.499µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-01T19:43:42+08:00"}
2020/7/1 下午7:43:42{"level":"info","msg":"sql/app/repository/task_repo.go:73873.423µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-01 2 555] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-01T19:43:42+08:00"}
2020/7/1 下午7:43:42{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-01T19:43:42+08:00"}
2020/7/1 下午7:43:42{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.jcc6x2Dc{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T19:43:42+08:00"}
2020/7/1 下午8:03:01{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.w7rCvQIT {555 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T20:03:01+08:00"}
2020/7/1 下午8:03:01{"level":"debug","msg":"GetUserRemain from Redis userId=555 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-01T20:03:01+08:00"}
2020/7/1 下午8:03:01{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.w7rCvQIT{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T20:03:01+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.tdRbrklY {555 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 289 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 281 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 492 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 491 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 490 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 11 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 272 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 487 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 16 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 182 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 457 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 458 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 378 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 485 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 50 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 483 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 484 0  0    特斯拉 Model3 0  0} {ObjectIdHex(\"\") 449 0  0    特斯拉 Model3 0  0} {ObjectIdHex(\"\") 456 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:292:289]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:284:281]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:495:492]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:494:491]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:493:490]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:14:11]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:275:272]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:490:487]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:19:16]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:185:182]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:460:457]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:461:458]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:381:378]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:488:485]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:53:50]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:486:483]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:487:484]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:452:449]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"[redis get function] keys: [UserInfo:459:456]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"GetUserRemain from Redis userId=555 remain=1","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/1 下午8:03:06{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.tdRbrklY {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\345\\234\\250\\344\\270\\200\\350\\265\\267\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\231\\272\\346\\271\\203***\\347\\247\\221\\346\\212\\200\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***HJ\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***MA\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***yt\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***sr\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***Tp\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***\\345\\210\\253\\344\\272\\272\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\277\\203\\344\\272\\213***\\344\\270\\203\\345\\274\\246\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\236\\253\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\217\\267*\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***60\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***21\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***VN\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\256\\235\\350\\264\\235***\\346\\212\\261\\346\\224\\271\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\360\\237\\222\\213\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***xe\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\350\\241\\214\\345\\220\\247***\\350\\241\\214\\345\\220\\247\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***50\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e LeftNum:1  {} [] 1309}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-01T20:03:06+08:00"}
2020/7/2 上午9:31:29{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.nUpxFuBh {281 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:31:29+08:00"}
2020/7/2 上午9:31:29{"level":"info","msg":"sql/app/repository/task_repo.go:181.499925msSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:31:29+08:00"}
2020/7/2 上午9:31:29{"level":"info","msg":"sql/app/repository/task_repo.go:731.567377msSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 281] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:31:29+08:00"}
2020/7/2 上午9:31:29{"level":"info","msg":"sql/app/repository/task_repo.go:18538.492µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:31:29+08:00"}
2020/7/2 上午9:31:29{"level":"info","msg":"sql/app/repository/task_repo.go:95489.019µsINSERT  INTO `mz_task_user` (`status`,`task_id`,`type`,`update_time`,`user_id`) VALUES (?,?,?,?,?)[1 2 3 2020-07-02 09:31:29.663470883 +0800 CST m=+77814.332697392 281] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:31:29+08:00"}
2020/7/2 上午9:31:29{"level":"debug","msg":"GetUserRemain from Redis userId=281 remain=1","source":"task.go:285:service.TaskDone","time":"2020-07-02T09:31:29+08:00"}
2020/7/2 上午9:31:29{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.nUpxFuBh{0 SUCCESS remain:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:31:29+08:00"}
2020/7/2 上午9:31:31{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.rcO67xM0 {281 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:31:31+08:00"}
2020/7/2 上午9:31:31{"level":"debug","msg":"GetUserRemain from Redis userId=281 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T09:31:31+08:00"}
2020/7/2 上午9:31:31{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.rcO67xM0{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:31:31+08:00"}
2020/7/2 上午9:50:29{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.iGkoWejg {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:50:29+08:00"}
2020/7/2 上午9:50:29{"level":"info","msg":"sql/app/repository/task_repo.go:18742.371µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:50:29+08:00"}
2020/7/2 上午9:50:29{"level":"info","msg":"sql/app/repository/task_repo.go:73788.295µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:50:29+08:00"}
2020/7/2 上午9:50:29{"level":"info","msg":"sql/app/repository/task_repo.go:18545.517µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:50:29+08:00"}
2020/7/2 上午9:50:29{"level":"info","msg":"sql/app/repository/task_repo.go:95475.884µsINSERT  INTO `mz_task_user` (`status`,`task_id`,`type`,`update_time`,`user_id`) VALUES (?,?,?,?,?)[1 2 3 2020-07-02 09:50:29.536183922 +0800 CST m=+78954.205410432 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:50:29+08:00"}
2020/7/2 上午9:50:29{"level":"debug","msg":"GetUserRemain from Redis userId=413 remain=1","source":"task.go:285:service.TaskDone","time":"2020-07-02T09:50:29+08:00"}
2020/7/2 上午9:50:29{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.iGkoWejg{0 SUCCESS remain:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:50:29+08:00"}
2020/7/2 上午9:52:07{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.mfsLwcko {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:52:07+08:00"}
2020/7/2 上午9:52:07{"level":"info","msg":"sql/app/repository/task_repo.go:18743.621µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:52:07+08:00"}
2020/7/2 上午9:52:07{"level":"info","msg":"sql/app/repository/task_repo.go:73845.215µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:52:07+08:00"}
2020/7/2 上午9:52:07{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T09:52:07+08:00"}
2020/7/2 上午9:52:07{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.mfsLwcko{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:52:07+08:00"}
2020/7/2 上午9:52:48{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.4R4mzjkT {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:52:48+08:00"}
2020/7/2 上午9:52:48{"level":"info","msg":"sql/app/repository/task_repo.go:18747.564µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:52:48+08:00"}
2020/7/2 上午9:52:48{"level":"info","msg":"sql/app/repository/task_repo.go:73903.94µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:52:48+08:00"}
2020/7/2 上午9:52:48{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T09:52:48+08:00"}
2020/7/2 上午9:52:48{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.4R4mzjkT{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:52:48+08:00"}
2020/7/2 上午9:53:12{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.nDyPlZfs {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:53:12+08:00"}
2020/7/2 上午9:53:12{"level":"info","msg":"sql/app/repository/task_repo.go:18751.347µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:53:12+08:00"}
2020/7/2 上午9:53:12{"level":"info","msg":"sql/app/repository/task_repo.go:73834.92µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:53:12+08:00"}
2020/7/2 上午9:53:12{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T09:53:12+08:00"}
2020/7/2 上午9:53:12{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.nDyPlZfs{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:53:12+08:00"}
2020/7/2 上午9:53:48{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.0QNfIguX {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:53:48+08:00"}
2020/7/2 上午9:53:48{"level":"info","msg":"sql/app/repository/task_repo.go:18922.504µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:53:48+08:00"}
2020/7/2 上午9:53:48{"level":"info","msg":"sql/app/repository/task_repo.go:73932.605µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:53:48+08:00"}
2020/7/2 上午9:53:48{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T09:53:48+08:00"}
2020/7/2 上午9:53:48{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.0QNfIguX{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:53:48+08:00"}
2020/7/2 上午9:53:50{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.pkrGvOGG {413 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:53:50+08:00"}
2020/7/2 上午9:53:50{"level":"debug","msg":"GetUserRemain from Redis userId=413 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T09:53:50+08:00"}
2020/7/2 上午9:53:50{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.pkrGvOGG{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:53:50+08:00"}
2020/7/2 上午9:54:31{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.UKur5flh {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:54:31+08:00"}
2020/7/2 上午9:54:31{"level":"info","msg":"sql/app/repository/task_repo.go:18748.077µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:54:31+08:00"}
2020/7/2 上午9:54:31{"level":"info","msg":"sql/app/repository/task_repo.go:73899.218µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T09:54:31+08:00"}
2020/7/2 上午9:54:31{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T09:54:31+08:00"}
2020/7/2 上午9:54:31{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.UKur5flh{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:54:31+08:00"}
2020/7/2 上午9:54:32{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.lybcWiZg {413 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:54:32+08:00"}
2020/7/2 上午9:54:32{"level":"debug","msg":"GetUserRemain from Redis userId=413 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T09:54:32+08:00"}
2020/7/2 上午9:54:32{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.lybcWiZg{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T09:54:32+08:00"}
2020/7/2 上午10:01:03{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.Nks0D0Dz {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:01:03+08:00"}
2020/7/2 上午10:01:03{"level":"info","msg":"sql/app/repository/task_repo.go:18773.886µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:01:03+08:00"}
2020/7/2 上午10:01:03{"level":"info","msg":"sql/app/repository/task_repo.go:73892.348µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:01:03+08:00"}
2020/7/2 上午10:01:03{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:01:03+08:00"}
2020/7/2 上午10:01:03{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.Nks0D0Dz{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:01:03+08:00"}
2020/7/2 上午10:01:25{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.9AIMwnkW {281 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:01:25+08:00"}
2020/7/2 上午10:01:25{"level":"info","msg":"sql/app/repository/task_repo.go:18762.728µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:01:25+08:00"}
2020/7/2 上午10:01:25{"level":"info","msg":"sql/app/repository/task_repo.go:73853.845µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 281] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:01:25+08:00"}
2020/7/2 上午10:01:25{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:01:25+08:00"}
2020/7/2 上午10:01:25{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.9AIMwnkW{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:01:25+08:00"}
2020/7/2 上午10:01:54{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.mU4Ejt07 {281 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:01:54+08:00"}
2020/7/2 上午10:01:54{"level":"debug","msg":"GetUserRemain from Redis userId=281 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T10:01:54+08:00"}
2020/7/2 上午10:01:54{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.mU4Ejt07{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:01:54+08:00"}
2020/7/2 上午10:02:00{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.QeeuUo38 {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:02:00+08:00"}
2020/7/2 上午10:02:00{"level":"info","msg":"sql/app/repository/task_repo.go:18808.559µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:02:00+08:00"}
2020/7/2 上午10:02:00{"level":"info","msg":"sql/app/repository/task_repo.go:73891.393µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:02:00+08:00"}
2020/7/2 上午10:02:00{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:02:00+08:00"}
2020/7/2 上午10:02:00{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.QeeuUo38{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:02:00+08:00"}
2020/7/2 上午10:04:45{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.tKeajN6F {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:04:45+08:00"}
2020/7/2 上午10:04:45{"level":"info","msg":"sql/app/repository/task_repo.go:18754.065µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:04:45+08:00"}
2020/7/2 上午10:04:45{"level":"info","msg":"sql/app/repository/task_repo.go:73873.719µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:04:45+08:00"}
2020/7/2 上午10:04:45{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:04:45+08:00"}
2020/7/2 上午10:04:45{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.tKeajN6F{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:04:45+08:00"}
2020/7/2 上午10:10:02{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.2KDKsDnV {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:10:02+08:00"}
2020/7/2 上午10:10:02{"level":"info","msg":"sql/app/repository/task_repo.go:18757.232µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:10:02+08:00"}
2020/7/2 上午10:10:02{"level":"info","msg":"sql/app/repository/task_repo.go:73873.901µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:10:02+08:00"}
2020/7/2 上午10:10:02{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:10:02+08:00"}
2020/7/2 上午10:10:02{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.2KDKsDnV{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:10:02+08:00"}
2020/7/2 上午10:11:36{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.CA12by8F {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:11:36+08:00"}
2020/7/2 上午10:11:36{"level":"info","msg":"sql/app/repository/task_repo.go:18800.479µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:11:36+08:00"}
2020/7/2 上午10:11:36{"level":"info","msg":"sql/app/repository/task_repo.go:73878.814µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:11:36+08:00"}
2020/7/2 上午10:11:36{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:11:36+08:00"}
2020/7/2 上午10:11:36{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.CA12by8F{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:11:36+08:00"}
2020/7/2 上午10:11:39{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.0y8ttDOO {413 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:11:39+08:00"}
2020/7/2 上午10:11:39{"level":"debug","msg":"GetUserRemain from Redis userId=413 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T10:11:39+08:00"}
2020/7/2 上午10:11:39{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.0y8ttDOO{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:11:39+08:00"}
2020/7/2 上午10:14:46{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.QFncx5wY {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:14:46+08:00"}
2020/7/2 上午10:14:46{"level":"info","msg":"sql/app/repository/task_repo.go:18800.451µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:14:46+08:00"}
2020/7/2 上午10:14:46{"level":"info","msg":"sql/app/repository/task_repo.go:73907.151µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:14:46+08:00"}
2020/7/2 上午10:14:46{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:14:46+08:00"}
2020/7/2 上午10:14:46{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.QFncx5wY{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:14:46+08:00"}
2020/7/2 上午10:14:49{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.aVd4aZzR {413 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:14:49+08:00"}
2020/7/2 上午10:14:49{"level":"debug","msg":"GetUserRemain from Redis userId=413 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T10:14:49+08:00"}
2020/7/2 上午10:14:49{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.aVd4aZzR{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:14:49+08:00"}
2020/7/2 上午10:16:42{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.nj4rHyXF {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:16:42+08:00"}
2020/7/2 上午10:16:42{"level":"info","msg":"sql/app/repository/task_repo.go:18798.304µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:16:42+08:00"}
2020/7/2 上午10:16:42{"level":"info","msg":"sql/app/repository/task_repo.go:73877.868µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:16:42+08:00"}
2020/7/2 上午10:16:42{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:16:42+08:00"}
2020/7/2 上午10:16:42{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.nj4rHyXF{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:16:42+08:00"}
2020/7/2 上午10:26:31{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.EdoujgL2 {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:26:31+08:00"}
2020/7/2 上午10:26:31{"level":"info","msg":"sql/app/repository/task_repo.go:18780.535µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:26:31+08:00"}
2020/7/2 上午10:26:31{"level":"info","msg":"sql/app/repository/task_repo.go:73895.763µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:26:31+08:00"}
2020/7/2 上午10:26:31{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:26:31+08:00"}
2020/7/2 上午10:26:31{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.EdoujgL2{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:26:31+08:00"}
2020/7/2 上午10:26:34{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.9foSZUQi {413 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:26:34+08:00"}
2020/7/2 上午10:26:34{"level":"debug","msg":"GetUserRemain from Redis userId=413 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T10:26:34+08:00"}
2020/7/2 上午10:26:34{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.9foSZUQi{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:26:34+08:00"}
2020/7/2 上午10:27:41{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.OxYTlht9 {281 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:27:41+08:00"}
2020/7/2 上午10:27:41{"level":"info","msg":"sql/app/repository/task_repo.go:18766.175µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:27:41+08:00"}
2020/7/2 上午10:27:41{"level":"info","msg":"sql/app/repository/task_repo.go:73934.578µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 281] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:27:41+08:00"}
2020/7/2 上午10:27:41{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:27:41+08:00"}
2020/7/2 上午10:27:41{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.OxYTlht9{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:27:41+08:00"}
2020/7/2 上午10:32:35{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.0YynBX3s {533 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:32:35+08:00"}
2020/7/2 上午10:32:35{"level":"info","msg":"sql/app/repository/task_repo.go:181.433468msSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:32:35+08:00"}
2020/7/2 上午10:32:35{"level":"info","msg":"sql/app/repository/task_repo.go:731.562847msSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 533] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:32:35+08:00"}
2020/7/2 上午10:32:35{"level":"info","msg":"sql/app/repository/task_repo.go:18580.345µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:32:35+08:00"}
2020/7/2 上午10:32:35{"level":"info","msg":"sql/app/repository/task_repo.go:95474.623µsINSERT  INTO `mz_task_user` (`status`,`task_id`,`type`,`update_time`,`user_id`) VALUES (?,?,?,?,?)[1 2 3 2020-07-02 10:32:35.137387321 +0800 CST m=+81479.806613845 533] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:32:35+08:00"}
2020/7/2 上午10:32:35{"level":"debug","msg":"GetUserRemain from Redis userId=533 remain=1","source":"task.go:285:service.TaskDone","time":"2020-07-02T10:32:35+08:00"}
2020/7/2 上午10:32:35{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.0YynBX3s{0 SUCCESS remain:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:32:35+08:00"}
2020/7/2 上午10:38:38{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.JpKF0RDd {553 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"info","msg":"sql/app/repository/task_repo.go:18764.445µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"info","msg":"sql/app/repository/task_repo.go:73840.731µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 553] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"info","msg":"sql/app/repository/task_repo.go:18635.456µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"info","msg":"sql/app/repository/task_repo.go:95498.244µsINSERT  INTO `mz_task_user` (`status`,`task_id`,`type`,`update_time`,`user_id`) VALUES (?,?,?,?,?)[1 2 3 2020-07-02 10:38:38.451648317 +0800 CST m=+81843.120874829 553] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"debug","msg":"GetUserRemain from Redis userId=553 remain=4","source":"task.go:285:service.TaskDone","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.JpKF0RDd{0 SUCCESS remain:4  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.jQxUdqUN {553 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"debug","msg":"GetUserRemain from Redis userId=553 remain=4","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:38:38{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.jQxUdqUN{0 SUCCESS Times:4  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:38:38+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.Om7XdTpx {553 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 289 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 281 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 492 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 491 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 490 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 11 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 272 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 487 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 16 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 182 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 457 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 458 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 378 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 485 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 50 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 483 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 484 0  0    特斯拉 Model3 0  0} {ObjectIdHex(\"\") 449 0  0    特斯拉 Model3 0  0} {ObjectIdHex(\"\") 456 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:292:289]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:284:281]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:495:492]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:494:491]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:493:490]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:14:11]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:275:272]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:490:487]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:19:16]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:185:182]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:460:457]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:461:458]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:381:378]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:488:485]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:53:50]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:486:483]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:487:484]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:452:449]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"[redis get function] keys: [UserInfo:459:456]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"GetUserRemain from Redis userId=553 remain=4","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:27{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.Om7XdTpx {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\345\\234\\250\\344\\270\\200\\350\\265\\267\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\231\\272\\346\\271\\203***\\347\\247\\221\\346\\212\\200\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***HJ\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***MA\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***yt\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***sr\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***Tp\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***\\345\\210\\253\\344\\272\\272\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\277\\203\\344\\272\\213***\\344\\270\\203\\345\\274\\246\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\236\\253\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\217\\267*\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***60\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***21\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***VN\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\256\\235\\350\\264\\235***\\346\\212\\261\\346\\224\\271\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\360\\237\\222\\213\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***xe\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\350\\241\\214\\345\\220\\247***\\350\\241\\214\\345\\220\\247\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***50\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e LeftNum:4  {} [] 1309}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T10:46:27+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.PkftqQOX {553 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 289 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 281 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 492 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 491 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 490 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 11 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 272 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 487 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 16 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 182 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 457 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 458 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 378 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 485 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 50 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 483 0  0    iPhone 11 Pro 0  0} {ObjectIdHex(\"\") 484 0  0    特斯拉 Model3 0  0} {ObjectIdHex(\"\") 449 0  0    特斯拉 Model3 0  0} {ObjectIdHex(\"\") 456 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:292:289]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:284:281]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:495:492]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:494:491]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:493:490]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:14:11]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:275:272]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:490:487]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:19:16]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:185:182]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:460:457]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:461:458]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:381:378]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:488:485]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:53:50]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:486:483]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:487:484]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:452:449]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"[redis get function] keys: [UserInfo:459:456]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"GetUserRemain from Redis userId=553 remain=4","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:46:30{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.PkftqQOX {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\345\\234\\250\\344\\270\\200\\350\\265\\267\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\231\\272\\346\\271\\203***\\347\\247\\221\\346\\212\\200\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***HJ\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***MA\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***yt\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***sr\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***Tp\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\347\\247\\222\\350\\277\\275***\\345\\210\\253\\344\\272\\272\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\277\\203\\344\\272\\213***\\344\\270\\203\\345\\274\\246\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\236\\253\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\217\\267*\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***60\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***21\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***VN\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\345\\256\\235\\350\\264\\235***\\346\\212\\261\\346\\224\\271\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"\\360\\237\\222\\213\" prizename:\"iPhone 11 Pro\" \u003e hotUser:\u003cuser_name:\"MZ***xe\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\350\\241\\214\\345\\220\\247***\\350\\241\\214\\345\\220\\247\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***50\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e LeftNum:4  {} [] 1309}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T10:46:30+08:00"}
2020/7/2 上午10:47:22{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.ciA6sk7R {553 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:47:22+08:00"}
2020/7/2 上午10:47:22{"level":"info","msg":"sql/app/repository/task_repo.go:18773.769µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:47:22+08:00"}
2020/7/2 上午10:47:22{"level":"info","msg":"sql/app/repository/task_repo.go:73947.586µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 553] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:47:22+08:00"}
2020/7/2 上午10:47:22{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:47:22+08:00"}
2020/7/2 上午10:47:22{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.ciA6sk7R{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:47:22+08:00"}
2020/7/2 上午10:47:25{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.GVqbNU3b {533 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:47:25+08:00"}
2020/7/2 上午10:47:25{"level":"info","msg":"sql/app/repository/task_repo.go:18813.611µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:47:25+08:00"}
2020/7/2 上午10:47:25{"level":"info","msg":"sql/app/repository/task_repo.go:73887.883µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 533] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:47:25+08:00"}
2020/7/2 上午10:47:25{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:47:25+08:00"}
2020/7/2 上午10:47:25{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.GVqbNU3b{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:47:25+08:00"}
2020/7/2 上午10:47:43{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.84ICfFMG {281 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:47:43+08:00"}
2020/7/2 上午10:47:43{"level":"info","msg":"sql/app/repository/task_repo.go:18787.405µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:47:43+08:00"}
2020/7/2 上午10:47:43{"level":"info","msg":"sql/app/repository/task_repo.go:73871.809µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 281] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:47:43+08:00"}
2020/7/2 上午10:47:43{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:47:43+08:00"}
2020/7/2 上午10:47:43{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.84ICfFMG{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:47:43+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"Investigation 收到请求消息. lotteryservice.investigation _INBOX.f1wgDVkWCFgq7xMZZpPo6p.jkY3J9Ye {这么好 可以不 可以 1 2 0 2 281 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"userId:281","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"userId:IdolName:\"\\350\\277\\231\\344\\271\\210\\345\\245\\275\" IdolWorks:\"\\345\\217\\257\\344\\273\\245\\344\\270\\215\" WhyYouLike:\"\\345\\217\\257\\344\\273\\245\" HowLong:1 HowMuch:2 WhyPay:2 UserId:281 ","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"entity{3 281 3 ObjectIdHex(\"5ef2c5c39c568f00010ddda0\") 信用卡 信用卡 信用卡的 3 0 2020-06-24T11:17:23+08:00 ce3f2ee9407c3a3e76673752054c8164 ce3f2ee9407c3a3e76673752054c8164}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"info","msg":"未发放权益","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"GetMostLikeWork time:1593658128977","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"4:bd127cfe28e6553b8484a8b2d181706a","source":"investigation.go:144:service.Investigation.func2","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"GetMostLikeWork 耗时:17","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"totalCount : 22130 , smallCount : 40","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"tm11593658128995","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:48:48{"level":"debug","msg":"Investigation 消息处理完成. lotteryservice.investigation _INBOX.f1wgDVkWCFgq7xMZZpPo6p.jkY3J9Ye {0 SUCCESS ClimbValue:4 IdolName:\"\\350\\277\\231\\344\\271\\210\\345\\245\\275\" LikeCounts:1 PopularWorks:\"\\345\\217\\257\\344\\273\\245\\344\\270\\215\" Time:\"\\344\\270\\215\\345\\210\\2601\\345\\221\\250\" Pay:\"\\344\\275\\216\\344\\272\\216100\\345\\205\\203\" Proportion:\"0\" ObjectId:\"5efd4b104118db0001fbbb76\"  {} [] 92}","source":"investigation.go:255:service.Investigation","time":"2020-07-02T10:48:48+08:00"}
2020/7/2 上午10:49:59{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.PJ96uGhm {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:49:59+08:00"}
2020/7/2 上午10:49:59{"level":"info","msg":"sql/app/repository/task_repo.go:18951.416µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:49:59+08:00"}
2020/7/2 上午10:49:59{"level":"info","msg":"sql/app/repository/task_repo.go:73914.665µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:49:59+08:00"}
2020/7/2 上午10:49:59{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:49:59+08:00"}
2020/7/2 上午10:49:59{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.PJ96uGhm{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:49:59+08:00"}
2020/7/2 上午10:51:30{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.AkYAIwuO {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:51:30+08:00"}
2020/7/2 上午10:51:30{"level":"info","msg":"sql/app/repository/task_repo.go:18860.71µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:51:30+08:00"}
2020/7/2 上午10:51:30{"level":"info","msg":"sql/app/repository/task_repo.go:73942.429µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:51:30+08:00"}
2020/7/2 上午10:51:30{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:51:30+08:00"}
2020/7/2 上午10:51:30{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.AkYAIwuO{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:51:30+08:00"}
2020/7/2 上午10:52:40{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.kPw1Tkq1 {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:52:40+08:00"}
2020/7/2 上午10:52:40{"level":"info","msg":"sql/app/repository/task_repo.go:18781.361µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:52:40+08:00"}
2020/7/2 上午10:52:40{"level":"info","msg":"sql/app/repository/task_repo.go:73876.494µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T10:52:40+08:00"}
2020/7/2 上午10:52:40{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T10:52:40+08:00"}
2020/7/2 上午10:52:40{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.kPw1Tkq1{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:52:40+08:00"}
2020/7/2 上午10:52:44{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.chdBGJmr {413 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:52:44+08:00"}
2020/7/2 上午10:52:44{"level":"debug","msg":"GetUserRemain from Redis userId=413 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T10:52:44+08:00"}
2020/7/2 上午10:52:44{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.chdBGJmr{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T10:52:44+08:00"}
2020/7/2 上午11:01:00{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.PHnaX0qr {533 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:01:00+08:00"}
2020/7/2 上午11:01:00{"level":"info","msg":"sql/app/repository/task_repo.go:18793.877µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:01:00+08:00"}
2020/7/2 上午11:01:00{"level":"info","msg":"sql/app/repository/task_repo.go:73868.308µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 533] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:01:00+08:00"}
2020/7/2 上午11:01:00{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T11:01:00+08:00"}
2020/7/2 上午11:01:00{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.PHnaX0qr{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:01:00+08:00"}
2020/7/2 上午11:01:03{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.p7OWXX7C {533 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:01:03+08:00"}
2020/7/2 上午11:01:03{"level":"debug","msg":"user_533 cache user remain not exist","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:01:03+08:00"}
2020/7/2 上午11:01:03{"level":"debug","msg":"获取用户抽中 再来一次 且未使用次数 userId=533 prizeId=6 againStatus=0 count=0","source":"lottery_repo.go:100:repository.(*mzLotteryRepo).GetUserRemain","time":"2020-07-02T11:01:03+08:00"}
2020/7/2 上午11:01:03{"level":"debug","msg":"CountUserJoinTimesByUserId userId=533 count=1","source":"lottery_repo.go:105:repository.(*mzLotteryRepo).GetUserRemain","time":"2020-07-02T11:01:03+08:00"}
2020/7/2 上午11:01:03{"level":"debug","msg":"GetUserRemain from DB userId=533 remain=0","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:01:03+08:00"}
2020/7/2 上午11:01:03{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.p7OWXX7C{0 SUCCESS  {} [] 11}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:01:03+08:00"}
2020/7/2 上午11:04:09{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.6NRY0Eez {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:04:09+08:00"}
2020/7/2 上午11:04:09{"level":"info","msg":"sql/app/repository/task_repo.go:18843.311µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:04:09+08:00"}
2020/7/2 上午11:04:09{"level":"info","msg":"sql/app/repository/task_repo.go:73891.375µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:04:09+08:00"}
2020/7/2 上午11:04:09{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T11:04:09+08:00"}
2020/7/2 上午11:04:09{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.6NRY0Eez{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:04:09+08:00"}
2020/7/2 上午11:04:12{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.QXWjgOwp {413 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:04:12+08:00"}
2020/7/2 上午11:04:12{"level":"debug","msg":"user_413 cache user remain not exist","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:04:12+08:00"}
2020/7/2 上午11:04:12{"level":"debug","msg":"获取用户抽中 再来一次 且未使用次数 userId=413 prizeId=6 againStatus=0 count=0","source":"lottery_repo.go:100:repository.(*mzLotteryRepo).GetUserRemain","time":"2020-07-02T11:04:12+08:00"}
2020/7/2 上午11:04:12{"level":"debug","msg":"CountUserJoinTimesByUserId userId=413 count=7","source":"lottery_repo.go:105:repository.(*mzLotteryRepo).GetUserRemain","time":"2020-07-02T11:04:12+08:00"}
2020/7/2 上午11:04:12{"level":"debug","msg":"GetUserRemain from DB 计算所得remain小于0 userId=413 remain=0","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:04:12+08:00"}
2020/7/2 上午11:04:12{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.QXWjgOwp{0 SUCCESS  {} [] 11}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:04:12+08:00"}
2020/7/2 上午11:05:15{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.fKTRwWuw {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:05:15+08:00"}
2020/7/2 上午11:05:15{"level":"info","msg":"sql/app/repository/task_repo.go:18795.389µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:05:15+08:00"}
2020/7/2 上午11:05:15{"level":"info","msg":"sql/app/repository/task_repo.go:73887.814µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:05:15+08:00"}
2020/7/2 上午11:05:15{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T11:05:15+08:00"}
2020/7/2 上午11:05:15{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.fKTRwWuw{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:05:15+08:00"}
2020/7/2 上午11:05:34{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.WVFglK5g {557 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:05:34+08:00"}
2020/7/2 上午11:05:34{"level":"info","msg":"sql/app/repository/task_repo.go:18739.275µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:05:34+08:00"}
2020/7/2 上午11:05:34{"level":"info","msg":"sql/app/repository/task_repo.go:73781.08µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 557] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:05:34+08:00"}
2020/7/2 上午11:05:34{"level":"info","msg":"sql/app/repository/task_repo.go:18567.779µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:05:34+08:00"}
2020/7/2 上午11:05:34{"level":"info","msg":"sql/app/repository/task_repo.go:95442.864µsINSERT  INTO `mz_task_user` (`status`,`task_id`,`type`,`update_time`,`user_id`) VALUES (?,?,?,?,?)[1 2 3 2020-07-02 11:05:34.608166733 +0800 CST m=+83459.277393239 557] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:05:34+08:00"}
2020/7/2 上午11:05:34{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=1","source":"task.go:285:service.TaskDone","time":"2020-07-02T11:05:34+08:00"}
2020/7/2 上午11:05:34{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.WVFglK5g{0 SUCCESS remain:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:05:34+08:00"}
2020/7/2 上午11:06:52{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.4GYcUdIV {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:06:52+08:00"}
2020/7/2 上午11:06:52{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:06:52+08:00"}
2020/7/2 上午11:06:52{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.4GYcUdIV{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:06:52+08:00"}
2020/7/2 上午11:07:37{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.fvL5TovO {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:07:37+08:00"}
2020/7/2 上午11:07:37{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:07:37+08:00"}
2020/7/2 上午11:07:37{"level":"debug","msg":"LargePrizes prizeNum=100 list=[]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:07:37+08:00"}
2020/7/2 上午11:07:37{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=1","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:07:37+08:00"}
2020/7/2 上午11:07:37{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.fvL5TovO {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e LeftNum:1 emptyPrize:\"\\347\\247\\222\\350\\277\\275\\347\\262\\211\\344\\270\\235\\347\\246\\217\\345\\210\\251!\\345\\244\\247\\345\\245\\226\\345\\200\\276\\346\\203\\205\\346\\224\\276\\351\\200\\201!\"  {} [] 789}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:07:37+08:00"}








2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky 收到请求消息. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.ReJWDwUL {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=1","source":"lucky.go:135:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"SetLockLotteryUser 设置redis分布式锁key=lottery:lock:user:557 success","source":"lucky.go:153:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"CountDistinctUser len(userIds)=100000","source":"lottery_repo.go:77:repository.(*mzLotteryRepo).GetLotteryTotalUsers","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"CountUserJoinTimesByUserId userId=557 count=2","source":"lottery_repo.go:148:repository.(*mzLotteryRepo).GetUserJoin","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=2 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"CountUserGainTimesByUserId userId=557 count=0","source":"lottery_repo.go:153:repository.(*mzLotteryRepo).GetUserGain","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky 进入抽奖流程 userJoinTimes=2","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky 进入抽奖流程 userGainTimes=0","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky lucky branch userJoinTimes 小于 20 lucky","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky lucky tslCount=0 iphoneCount=0 totalUsers=100000 userId=557","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"GetPrizeStep key=lottery:step:tsl error=redis: nil","source":"lottery_repo.go:345:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=0","source":"lottery_repo.go:309:repository.(*mzLotteryRepo).GetPrizeStep","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"GetPrizeStep key=lottery:step:tsl IncrPrizeStep 成功 num=0","source":"lottery_repo.go:345:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"GetPrizeStep from DB key=lottery:step:tsl num=0","source":"lottery_repo.go:345:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=1","source":"lottery_repo.go:368:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky lucky branch1 prizeId=1","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"IsUserWinTslOrIphone 用户未中特斯拉或iPhone","source":"lucky.go:585:service.lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky lucky prizeId=1","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"IsUserWinTslOrIphone 用户未中特斯拉或iPhone","source":"lucky.go:303:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky 发奖 tslId 或 iphoneId 或 miBandId resp.Data.PrizeId=1","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"SetLockLotteryServerPrize 设置redis分布式锁key=lottery:lock:server:prize:1 success","source":"lucky.go:414:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky 获取 特斯拉 iPhone 小米手环 写入用户奖品表成功","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"UnLockLotteryServerPrize 删除redis分布式锁key=lottery:lock:server:prize:1 success","source":"lucky.go:457:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"UnLockLotteryUser 删除redis分布式锁key=lottery:lock:user:557 success","source":"lucky.go:457:service.Lucky","time":"2020-07-02T11:07:42+08:00"}
2020/7/2 上午11:07:42{"level":"debug","msg":"Lucky 消息处理完成. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.ReJWDwUL {0 SUCCESS PrizeId:1 PrizeName:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png\" ReceiveId:\"SN1593659262465867459aSG6Zd\" PrizeLevel:1  {} [] 144}","source":"lucky.go:457:service.Lucky","time":"2020-07-02T11:07:42+08:00"}








2020/7/2 上午11:08:39{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.uFQBWfC3 {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:39+08:00"}
2020/7/2 上午11:08:39{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:39+08:00"}
2020/7/2 上午11:08:39{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:39+08:00"}
2020/7/2 上午11:08:39{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:39+08:00"}
2020/7/2 上午11:08:39{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:39+08:00"}
2020/7/2 上午11:08:39{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:39+08:00"}
2020/7/2 上午11:08:39{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.uFQBWfC3 {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:39+08:00"}
2020/7/2 上午11:08:41{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.eGAxQN0U {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:41+08:00"}
2020/7/2 上午11:08:41{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:41+08:00"}
2020/7/2 上午11:08:41{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:41+08:00"}
2020/7/2 上午11:08:41{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:41+08:00"}
2020/7/2 上午11:08:41{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:41+08:00"}
2020/7/2 上午11:08:41{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:41+08:00"}
2020/7/2 上午11:08:41{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.eGAxQN0U {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:41+08:00"}
2020/7/2 上午11:08:42{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.cEOMf71n {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:42+08:00"}
2020/7/2 上午11:08:42{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:42+08:00"}
2020/7/2 上午11:08:42{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:42+08:00"}
2020/7/2 上午11:08:42{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:42+08:00"}
2020/7/2 上午11:08:42{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:42+08:00"}
2020/7/2 上午11:08:42{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:42+08:00"}
2020/7/2 上午11:08:42{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.cEOMf71n {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:42+08:00"}
2020/7/2 上午11:08:43{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.J0pHHRra {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:43+08:00"}
2020/7/2 上午11:08:43{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:43+08:00"}
2020/7/2 上午11:08:43{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:43+08:00"}
2020/7/2 上午11:08:43{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:43+08:00"}
2020/7/2 上午11:08:43{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:43+08:00"}
2020/7/2 上午11:08:43{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:43+08:00"}
2020/7/2 上午11:08:43{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.J0pHHRra {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:43+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.ezr1Ijn5 {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.ezr1Ijn5 {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.1RB5eQ4q {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:44{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.1RB5eQ4q {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:44+08:00"}
2020/7/2 上午11:08:45{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.LUccZWwq {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:45+08:00"}
2020/7/2 上午11:08:45{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:45+08:00"}
2020/7/2 上午11:08:45{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:45+08:00"}
2020/7/2 上午11:08:45{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:45+08:00"}
2020/7/2 上午11:08:45{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:45+08:00"}
2020/7/2 上午11:08:45{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:45+08:00"}
2020/7/2 上午11:08:45{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.LUccZWwq {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:45+08:00"}
2020/7/2 上午11:08:46{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.IlqDEXQv {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:46+08:00"}
2020/7/2 上午11:08:46{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:46+08:00"}
2020/7/2 上午11:08:46{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:46+08:00"}
2020/7/2 上午11:08:46{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:46+08:00"}
2020/7/2 上午11:08:46{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:46+08:00"}
2020/7/2 上午11:08:46{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:46+08:00"}
2020/7/2 上午11:08:46{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.IlqDEXQv {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:46+08:00"}
2020/7/2 上午11:08:47{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.mSyUmtTP {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:47+08:00"}
2020/7/2 上午11:08:47{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:47+08:00"}
2020/7/2 上午11:08:47{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:47+08:00"}
2020/7/2 上午11:08:47{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:47+08:00"}
2020/7/2 上午11:08:47{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:47+08:00"}
2020/7/2 上午11:08:47{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:47+08:00"}
2020/7/2 上午11:08:47{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.mSyUmtTP {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:47+08:00"}
2020/7/2 上午11:08:48{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.hNJKZmF1 {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:08:48+08:00"}
2020/7/2 上午11:08:48{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:08:48+08:00"}
2020/7/2 上午11:08:48{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:08:48+08:00"}
2020/7/2 上午11:08:48{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:08:48+08:00"}
2020/7/2 上午11:08:48{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:08:48+08:00"}
2020/7/2 上午11:08:48{"level":"debug","msg":"GetUserRemain from Redis userId=557 remain=0","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:08:48+08:00"}
2020/7/2 上午11:08:48{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.hNJKZmF1 {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e  {} [] 784}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:08:48+08:00"}
2020/7/2 上午11:09:15{"level":"debug","msg":"MyPrizes 收到请求消息. lotteryservice.myprizes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.Y75vXwcf {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:09:15+08:00"}
2020/7/2 上午11:09:15{"level":"debug","msg":"MyPrizes get user_557 prize list=[{ObjectIdHex(\"\") 0 1 SN1593659262465867459aSG6Zd 0 2020-07-02T11:07:42+08:00  2020-09-30T23:59:59+08:00 特斯拉 Model3 0 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png 0}]","source":"prize_list.go:77:service.MyPrizes","time":"2020-07-02T11:09:15+08:00"}
2020/7/2 上午11:09:15{"level":"debug","msg":"MyPrizes 消息处理完成. lotteryservice.myprizes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.Y75vXwcf {0 SUCCESS List:\u003cPrizeId:1 PrizeName:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png\" CreateAt:\"2020.07.02\" ExpireAt:\"2020.09.30\" ReceiveId:\"SN1593659262465867459aSG6Zd\" \u003e  {} [] 169}","source":"prize_list.go:132:service.MyPrizes","time":"2020-07-02T11:09:15+08:00"}
2020/7/2 上午11:10:05{"level":"debug","msg":"MyPrizes 收到请求消息. lotteryservice.myprizes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.5nJDwXbx {557 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:10:05+08:00"}
2020/7/2 上午11:10:05{"level":"debug","msg":"MyPrizes get user_557 prize list=[{ObjectIdHex(\"\") 0 1 SN1593659262465867459aSG6Zd 0 2020-07-02T11:07:42+08:00  2020-09-30T23:59:59+08:00 特斯拉 Model3 0 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png 0}]","source":"prize_list.go:77:service.MyPrizes","time":"2020-07-02T11:10:05+08:00"}
2020/7/2 上午11:10:05{"level":"debug","msg":"MyPrizes 消息处理完成. lotteryservice.myprizes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.5nJDwXbx {0 SUCCESS List:\u003cPrizeId:1 PrizeName:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png\" CreateAt:\"2020.07.02\" ExpireAt:\"2020.09.30\" ReceiveId:\"SN1593659262465867459aSG6Zd\" \u003e  {} [] 169}","source":"prize_list.go:132:service.MyPrizes","time":"2020-07-02T11:10:05+08:00"}
2020/7/2 上午11:10:26{"level":"debug","msg":"Receive 收到请求消息. lotteryservice.receive _INBOX.f1wgDVkWCFgq7xMZZpPo6p.JsigNOcv {1 鲁彦伯 186 3250 8973 天津 天津市 和平区 佳兆业广场 557 SN1593659262465867459aSG6Zd {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:10:26+08:00"}
2020/7/2 上午11:10:26{"level":"debug","msg":"Receive 消息处理完成. lotteryservice.receive _INBOX.f1wgDVkWCFgq7xMZZpPo6p.JsigNOcv {0 SUCCESS \u003cnil\u003e {} [] 9}","source":"receive.go:67:service.LotteryReceive","time":"2020-07-02T11:10:26+08:00"}
2020/7/2 上午11:11:24{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.lfA3WQbK {558 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:11:24+08:00"}
2020/7/2 上午11:11:24{"level":"info","msg":"sql/app/repository/task_repo.go:18805.422µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:11:24+08:00"}
2020/7/2 上午11:11:24{"level":"info","msg":"sql/app/repository/task_repo.go:73808.136µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:11:24+08:00"}
2020/7/2 上午11:11:24{"level":"info","msg":"sql/app/repository/task_repo.go:18643.509µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:11:24+08:00"}
2020/7/2 上午11:11:24{"level":"info","msg":"sql/app/repository/task_repo.go:95526.026µsINSERT  INTO `mz_task_user` (`status`,`task_id`,`type`,`update_time`,`user_id`) VALUES (?,?,?,?,?)[1 2 3 2020-07-02 11:11:24.77437423 +0800 CST m=+83809.443600761 558] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:11:24+08:00"}
2020/7/2 上午11:11:24{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=1","source":"task.go:285:service.TaskDone","time":"2020-07-02T11:11:24+08:00"}
2020/7/2 上午11:11:24{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.lfA3WQbK{0 SUCCESS remain:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:11:24+08:00"}
2020/7/2 上午11:12:06{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.D1vAHZE4 {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:06+08:00"}
2020/7/2 上午11:12:06{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:12:06+08:00"}
2020/7/2 上午11:12:06{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.D1vAHZE4{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:06+08:00"}
2020/7/2 上午11:12:17{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.VQxAVQ8H {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:17+08:00"}
2020/7/2 上午11:12:17{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:12:17+08:00"}
2020/7/2 上午11:12:17{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:12:17+08:00"}
2020/7/2 上午11:12:17{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:12:17+08:00"}
2020/7/2 上午11:12:17{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:12:17+08:00"}
2020/7/2 上午11:12:17{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=1","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:12:17+08:00"}
2020/7/2 上午11:12:17{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.VQxAVQ8H {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e LeftNum:1  {} [] 786}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:12:17+08:00"}









2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky 收到请求消息. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.krQOBjoT {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=1","source":"lucky.go:135:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"SetLockLotteryUser 设置redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:153:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"CountDistinctUser len(userIds)=100000","source":"lottery_repo.go:77:repository.(*mzLotteryRepo).GetLotteryTotalUsers","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"CountUserJoinTimesByUserId userId=558 count=2","source":"lottery_repo.go:148:repository.(*mzLotteryRepo).GetUserJoin","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=1","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=2 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"CountUserGainTimesByUserId userId=558 count=0","source":"lottery_repo.go:153:repository.(*mzLotteryRepo).GetUserGain","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky 进入抽奖流程 userJoinTimes=2","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky 进入抽奖流程 userGainTimes=0","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky lucky branch userJoinTimes 小于 20 lucky","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky lucky tslCount=1 iphoneCount=0 totalUsers=100000 userId=558","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"GetPrizeStep from Redis key=lottery:step:tsl num=1","source":"lottery_repo.go:345:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=1","source":"lottery_repo.go:368:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky lucky branch2 prizeId=1","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"IsUserWinTslOrIphone 用户未中特斯拉或iPhone","source":"lucky.go:585:service.lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky lucky prizeId=1","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"IsUserWinTslOrIphone 用户未中特斯拉或iPhone","source":"lucky.go:303:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky 发奖 tslId 或 iphoneId 或 miBandId resp.Data.PrizeId=1","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"SetLockLotteryServerPrize 设置redis分布式锁key=lottery:lock:server:prize:1 success","source":"lucky.go:414:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=1","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky 获取 特斯拉 iPhone 小米手环 写入用户奖品表成功","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"UnLockLotteryServerPrize 删除redis分布式锁key=lottery:lock:server:prize:1 success","source":"lucky.go:457:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"UnLockLotteryUser 删除redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:457:service.Lucky","time":"2020-07-02T11:12:19+08:00"}
2020/7/2 上午11:12:19{"level":"debug","msg":"Lucky 消息处理完成. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.krQOBjoT {0 SUCCESS PrizeId:1 PrizeName:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png\" ReceiveId:\"SN1593659539729713461ZTasJ9\" PrizeLevel:1  {} [] 144}","source":"lucky.go:457:service.Lucky","time":"2020-07-02T11:12:19+08:00"}








2020/7/2 上午11:12:36{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.TkOuLou6 {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=0","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.TkOuLou6{0 SUCCESS  {} [] 11}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"debug","msg":"收到请求消息. lotteryservice.gettasks _INBOX.f1wgDVkWCFgq7xMZZpPo6p.CTpQ9Z9R {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:34936.089µsSELECT * FROM `mz_task`  [] 10","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:631.205602msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2 558] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:631.933737msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[7 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:631.984772msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[9 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:631.972212msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[4 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:632.082708msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[10 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:632.277243msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[5 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:632.3895msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[8 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:632.429725msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[6 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:632.878364msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[1 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"info","msg":"sql/app/repository/task_repo.go:633.184841msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[3 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:36{"level":"debug","msg":"消息处理完成. lotteryservice.gettasks_INBOX.f1wgDVkWCFgq7xMZZpPo6p.CTpQ9Z9R{0 SUCCESS list:\u003cid:1 task_name:\"\\346\\210\\220\\345\\212\\237\\346\\263\\250\\345\\206\\214\" reward:3 type:1 status:1 update_time:\"2020-04-03T14:39:24+08:00\" flag_text:\"\\345\\217\\257\\351\\242\\206\\345\\217\\226\" details:\"\\351\\246\\226\\346\\254\\241\\346\\263\\250\\345\\206\\214\\347\\231\\273\\345\\275\\225\\350\\216\\267\\350\\265\\2403\\346\\254\\241\" \u003e list:\u003cid:3 task_name:\"\\351\\202\\200\\350\\257\\267\\345\\245\\275\\345\\217\\213\" reward:1 type:2 status:1 update_time:\"2020-04-03T14:39:24+08:00\" flag:2 flag_text:\"\\345\\216\\273\\351\\202\\200\\350\\257\\267\" details:\"\\346\\257\\217\\351\\202\\200\\350\\257\\2671\\344\\272\\272\\346\\263\\250\\345\\206\\214\\346\\210\\220\\345\\212\\237\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e list:\u003cid:7 task_name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574 NFC\\347\\211\\210\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:02+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2402\\346\\254\\241\" pid:2 \u003e list:\u003cid:9 task_name:\"I Do BOOM\\347\\223\\267\\347\\263\\273\\345\\210\\227 18K\\351\\207\\221\\347\\234\\237\\351\\222\\273\\347\\237\\263\\351\\224\\201\\351\\252\\250\\351\\241\\271\\351\\223\\276 \\351\\273\\221\\351\\231\\266\\350\\211\\262\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:04+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2405\\346\\254\\241\" pid:4 \u003e list:\u003cid:10 task_name:\"I Do \\345\\277\\203\\346\\211\\211\\347\\263\\273\\345\\210\\227 18K\\351\\207\\221\\351\\222\\273\\347\\237\\263\\351\\224\\201\\351\\252\\250\\351\\241\\271\\351\\223\\276\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:05+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2405\\346\\254\\241\" pid:5 \u003e list:\u003cid:5 task_name:\"\\345\\260\\217\\347\\261\\263\\345\\260\\217\\347\\210\\261\\351\\237\\263\\347\\256\\261 Pro\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:01+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2402\\346\\254\\241\" pid:1 \u003e list:\u003cid:8 task_name:\"\\345\\260\\217\\347\\261\\263\\347\\247\\273\\345\\212\\250\\347\\224\\265\\346\\272\\2203 10000mAh \\351\\223\\266\\350\\211\\262\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:03+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" pid:3 \u003e list:\u003cid:4 task_name:\"\\350\\257\\235\\350\\264\\271\\345\\205\\205\\345\\200\\274\" reward:1 type:2 status:1 update_time:\"2020-04-03T14:39:24+08:00\" flag:4 flag_text:\"\\345\\205\\205\\345\\200\\274\" details:\"\\346\\257\\217\\345\\205\\205\\345\\200\\2741\\346\\254\\241\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e list:\u003cid:6 task_name:\"\\345\\256\\214\\346\\210\\220\\351\\227\\256\\345\\215\\267\\350\\260\\203\\346\\237\\245\" reward:1 type:2 status:1 update_time:\"2020-04-03T14:39:24+08:00\" flag:5 flag_text:\"\\345\\216\\273\\345\\256\\214\\346\\210\\220\" details:\"\\351\\246\\226\\346\\254\\241\\345\\256\\214\\346\\210\\220\\350\\260\\203\\346\\237\\245\\351\\227\\256\\345\\215\\267\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e list:\u003cid:2 task_name:\"\\346\\257\\217\\346\\227\\245\\347\\231\\273\\345\\275\\225\" reward:1 type:3 status:1 update_time:\"2020-04-03T14:39:24+08:00\" is_done:true flag:6 flag_text:\"\\346\\230\\216\\346\\227\\245\\345\\206\\215\\346\\235\\245\" details:\"\\346\\257\\217\\345\\244\\251\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e  {} [] 1035}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:36+08:00"}
2020/7/2 上午11:12:38{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.glV8DmkL {558 1 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"info","msg":"sql/app/repository/task_repo.go:18812.849µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 1) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"info","msg":"sql/app/repository/task_repo.go:63888.195µsSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[1 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"info","msg":"sql/app/repository/task_repo.go:18615.161µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 1) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"info","msg":"sql/app/repository/task_repo.go:95485.049µsINSERT  INTO `mz_task_user` (`status`,`task_id`,`type`,`update_time`,`user_id`) VALUES (?,?,?,?,?)[1 1 1 2020-07-02 11:12:38.618609721 +0800 CST m=+83883.287836258 558] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=3","source":"task.go:285:service.TaskDone","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.glV8DmkL{0 SUCCESS remain:3  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.J3nHA6QU {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=3","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:38{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.J3nHA6QU{0 SUCCESS Times:3  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:38+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"LuckyHome 收到请求消息. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.kRvt7Eq7 {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"get prizes from Redis list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"luckyhome.go:28:service.LuckyHome","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"LargePrizes prizeNum=100 list=[{ObjectIdHex(\"\") 558 0  0    特斯拉 Model3 0  0} {ObjectIdHex(\"\") 557 0  0    特斯拉 Model3 0  0}]","source":"lottery_repo.go:188:repository.(*mzLotteryRepo).LargePrizes","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"[redis get function] keys: [UserInfo:561:558]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"[redis get function] keys: [UserInfo:560:557]","source":"user_repo.go:456:repository.(*mzUserInfoRepo).GetByUserId","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"get user info from redis","source":"luckyhome.go:57:service.LuckyHome","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=3","source":"luckyhome.go:80:service.LuckyHome","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:39{"level":"debug","msg":"LuckyHome 消息处理完成. lotteryservice.luckyhome _INBOX.f1wgDVkWCFgq7xMZZpPo6p.kRvt7Eq7 {0 SUCCESS prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\" \u003e prizeDate:\u003cPrizeId:5 Name:\"\\344\\270\\200\\345\\245\\227\\345\\214\\273\\347\\224\\250\\345\\217\\243\\347\\275\\251\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\" \u003e prizeDate:\u003cPrizeId:2 Name:\"iPhone 11 Pro\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\" \u003e prizeDate:\u003cPrizeId:7 Name:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\" \u003e prizeDate:\u003cPrizeId:6 Name:\"\\345\\206\\215\\346\\235\\245\\344\\270\\200\\346\\254\\241\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\" \u003e prizeDate:\u003cPrizeId:3 Name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\" \u003e prizeDate:\u003cPrizeId:4 Name:\"\\347\\247\\222\\350\\277\\275\\345\\256\\232\\345\\210\\266\\347\\244\\274\\347\\233\\222\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\" \u003e prizeDate:\u003cPrizeId:1 Name:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" ImageUrl:\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***01\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e hotUser:\u003cuser_name:\"\\346\\265\\213\\350\\257\\225***\\345\\277\\203\\346\\204\\277\" prizename:\"\\347\\211\\271\\346\\226\\257\\346\\213\\211 Model3\" \u003e LeftNum:3  {} [] 819}","source":"luckyhome.go:92:service.LuckyHome","time":"2020-07-02T11:12:39+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky 收到请求消息. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.u0N80CTx {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=3","source":"lucky.go:135:service.Lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"SetLockLotteryUser 设置redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:153:service.Lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"CountDistinctUser len(userIds)=100000","source":"lottery_repo.go:77:repository.(*mzLotteryRepo).GetLotteryTotalUsers","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"CountUserJoinTimesByUserId userId=558 count=3","source":"lottery_repo.go:148:repository.(*mzLotteryRepo).GetUserJoin","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=2","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=2 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"CountUserGainTimesByUserId userId=558 count=1","source":"lottery_repo.go:153:repository.(*mzLotteryRepo).GetUserGain","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky 进入抽奖流程 userJoinTimes=3","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky 进入抽奖流程 userGainTimes=1","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky lucky branch userJoinTimes 小于 20 lucky","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky lucky tslCount=2 iphoneCount=0 totalUsers=100000 userId=558","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"GetPrizeStep from Redis key=lottery:step:tsl num=2","source":"lottery_repo.go:345:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=1","source":"lottery_repo.go:368:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky lucky branch3 prizeId=1","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"IsUserWinTslOrIphone 用户中过特斯拉或iPhone count=1","source":"lucky.go:585:service.lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=-1","source":"lottery_repo.go:372:repository.(*mzLotteryRepo).UnLockTslOrIphone","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky lucky prizeId=7","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky 发奖 thankId resp.Data.PrizeId=7","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"UnLockLotteryUser 删除redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:354:service.Lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:45{"level":"debug","msg":"Lucky 消息处理完成. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.u0N80CTx {0 SUCCESS PrizeId:7 PrizeName:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" LeftNum:2 ReceiveId:\"SN1593659565316984163wJFlqg\" PrizeLevel:7  {} [] 60}","source":"lucky.go:354:service.Lucky","time":"2020-07-02T11:12:45+08:00"}
2020/7/2 上午11:12:51{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.zk9mbkpW {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:51+08:00"}
2020/7/2 上午11:12:51{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=2","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:12:51+08:00"}
2020/7/2 上午11:12:51{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.zk9mbkpW{0 SUCCESS Times:2  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:51+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky 收到请求消息. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.B4qFrUyy {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=2","source":"lucky.go:135:service.Lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"SetLockLotteryUser 设置redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:153:service.Lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"CountDistinctUser len(userIds)=100000","source":"lottery_repo.go:77:repository.(*mzLotteryRepo).GetLotteryTotalUsers","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"CountUserJoinTimesByUserId userId=558 count=4","source":"lottery_repo.go:148:repository.(*mzLotteryRepo).GetUserJoin","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=2","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=2 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"CountUserGainTimesByUserId userId=558 count=1","source":"lottery_repo.go:153:repository.(*mzLotteryRepo).GetUserGain","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky 进入抽奖流程 userJoinTimes=4","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky 进入抽奖流程 userGainTimes=1","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky lucky branch userJoinTimes 小于 20 lucky","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky lucky tslCount=2 iphoneCount=0 totalUsers=100000 userId=558","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"GetPrizeStep from Redis key=lottery:step:tsl num=2","source":"lottery_repo.go:345:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=1","source":"lottery_repo.go:368:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky lucky branch3 prizeId=1","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"IsUserWinTslOrIphone 用户中过特斯拉或iPhone count=1","source":"lucky.go:585:service.lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=-1","source":"lottery_repo.go:372:repository.(*mzLotteryRepo).UnLockTslOrIphone","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky lucky prizeId=7","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky 发奖 thankId resp.Data.PrizeId=7","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"UnLockLotteryUser 删除redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:354:service.Lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:52{"level":"debug","msg":"Lucky 消息处理完成. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.B4qFrUyy {0 SUCCESS PrizeId:7 PrizeName:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" LeftNum:1 ReceiveId:\"SN1593659572424957579OegrG4\" PrizeLevel:7  {} [] 60}","source":"lucky.go:354:service.Lucky","time":"2020-07-02T11:12:52+08:00"}
2020/7/2 上午11:12:57{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.14UHDTVv {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:57+08:00"}
2020/7/2 上午11:12:57{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=1","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:12:57+08:00"}
2020/7/2 上午11:12:57{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.14UHDTVv{0 SUCCESS Times:1  {} [] 13}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:57+08:00"}
2020/7/2 上午11:12:57{"level":"debug","msg":"Lucky 收到请求消息. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.7k14odOo {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:57+08:00"}
2020/7/2 上午11:12:57{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=1","source":"lucky.go:135:service.Lucky","time":"2020-07-02T11:12:57+08:00"}
2020/7/2 上午11:12:57{"level":"debug","msg":"SetLockLotteryUser 设置redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:153:service.Lucky","time":"2020-07-02T11:12:57+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"CountDistinctUser len(userIds)=100000","source":"lottery_repo.go:77:repository.(*mzLotteryRepo).GetLotteryTotalUsers","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"CountUserJoinTimesByUserId userId=558 count=5","source":"lottery_repo.go:148:repository.(*mzLotteryRepo).GetUserJoin","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=1 count=2","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"CountWinPrizeByPrizeId prizeId=2 count=0","source":"lottery_repo.go:158:repository.(*mzLotteryRepo).CountWinPrize","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"CountUserGainTimesByUserId userId=558 count=1","source":"lottery_repo.go:153:repository.(*mzLotteryRepo).GetUserGain","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky 进入抽奖流程 userJoinTimes=5","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky 进入抽奖流程 userGainTimes=1","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky lucky branch userJoinTimes 小于 20 lucky","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky lucky tslCount=2 iphoneCount=0 totalUsers=100000 userId=558","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"GetPrizeStep from Redis key=lottery:step:tsl num=2","source":"lottery_repo.go:345:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=1","source":"lottery_repo.go:368:repository.(*mzLotteryRepo).LockTslOrIphone","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky lucky branch3 prizeId=1","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"IsUserWinTslOrIphone 用户中过特斯拉或iPhone count=1","source":"lucky.go:585:service.lucky","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"IncrPrizeStep 成功 key=lottery:step:tsl num=-1","source":"lottery_repo.go:372:repository.(*mzLotteryRepo).UnLockTslOrIphone","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky lucky prizeId=7","source":"lucky.go:287:service.Lucky","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky 发奖 thankId resp.Data.PrizeId=7","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"UnLockLotteryUser 删除redis分布式锁key=lottery:lock:user:558 success","source":"lucky.go:354:service.Lucky","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:12:58{"level":"debug","msg":"Lucky 消息处理完成. lotteryservice.lucky _INBOX.f1wgDVkWCFgq7xMZZpPo6p.7k14odOo {0 SUCCESS PrizeId:7 PrizeName:\"\\350\\260\\242\\350\\260\\242\\345\\217\\202\\344\\270\\216\" ReceiveId:\"SN15936595781506333330SnhQX\" PrizeLevel:7  {} [] 58}","source":"lucky.go:354:service.Lucky","time":"2020-07-02T11:12:58+08:00"}
2020/7/2 上午11:13:02{"level":"debug","msg":"收到请求消息. lotteryservice.lotterytimes _INBOX.f1wgDVkWCFgq7xMZZpPo6p.H244uqyX {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:13:02+08:00"}
2020/7/2 上午11:13:02{"level":"debug","msg":"GetUserRemain from Redis userId=558 remain=0","source":"lottery_times.go:21:service.LotteryTimes","time":"2020-07-02T11:13:02+08:00"}
2020/7/2 上午11:13:02{"level":"debug","msg":"消息处理完成. lotteryservice.lotterytimes_INBOX.f1wgDVkWCFgq7xMZZpPo6p.H244uqyX{0 SUCCESS  {} [] 11}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:13:02+08:00"}
2020/7/2 上午11:13:07{"level":"debug","msg":"收到请求消息. lotteryservice.gettasks _INBOX.f1wgDVkWCFgq7xMZZpPo6p.ZpEY5712 {558 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:34943.134µsSELECT * FROM `mz_task`  [] 10","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:631.189791msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[1 558] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:631.120786msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[4 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.083687msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[7 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.142603msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[3 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.072478msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[9 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.145366msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[6 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.369082msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2 558] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.569032msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[5 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.628142msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[8 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"info","msg":"sql/app/repository/task_repo.go:632.619339msSELECT * FROM `mz_task_user`  WHERE (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[10 558] 0","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:07{"level":"debug","msg":"消息处理完成. lotteryservice.gettasks_INBOX.f1wgDVkWCFgq7xMZZpPo6p.ZpEY5712{0 SUCCESS list:\u003cid:3 task_name:\"\\351\\202\\200\\350\\257\\267\\345\\245\\275\\345\\217\\213\" reward:1 type:2 status:1 update_time:\"2020-04-03T14:39:24+08:00\" flag:2 flag_text:\"\\345\\216\\273\\351\\202\\200\\350\\257\\267\" details:\"\\346\\257\\217\\351\\202\\200\\350\\257\\2671\\344\\272\\272\\346\\263\\250\\345\\206\\214\\346\\210\\220\\345\\212\\237\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e list:\u003cid:7 task_name:\"\\345\\260\\217\\347\\261\\263\\346\\211\\213\\347\\216\\2574 NFC\\347\\211\\210\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:02+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2402\\346\\254\\241\" pid:2 \u003e list:\u003cid:9 task_name:\"I Do BOOM\\347\\223\\267\\347\\263\\273\\345\\210\\227 18K\\351\\207\\221\\347\\234\\237\\351\\222\\273\\347\\237\\263\\351\\224\\201\\351\\252\\250\\351\\241\\271\\351\\223\\276 \\351\\273\\221\\351\\231\\266\\350\\211\\262\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:04+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2405\\346\\254\\241\" pid:4 \u003e list:\u003cid:5 task_name:\"\\345\\260\\217\\347\\261\\263\\345\\260\\217\\347\\210\\261\\351\\237\\263\\347\\256\\261 Pro\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:01+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2402\\346\\254\\241\" pid:1 \u003e list:\u003cid:8 task_name:\"\\345\\260\\217\\347\\261\\263\\347\\247\\273\\345\\212\\250\\347\\224\\265\\346\\272\\2203 10000mAh \\351\\223\\266\\350\\211\\262\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:03+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" pid:3 \u003e list:\u003cid:10 task_name:\"I Do \\345\\277\\203\\346\\211\\211\\347\\263\\273\\345\\210\\227 18K\\351\\207\\221\\351\\222\\273\\347\\237\\263\\351\\224\\201\\351\\252\\250\\351\\241\\271\\351\\223\\276\" reward:2 type:2 status:1 update_time:\"2020-06-12T15:00:05+08:00\" flag:3 flag_text:\"\\350\\264\\255\\344\\271\\260\" details:\"\\346\\210\\220\\345\\212\\237\\350\\264\\255\\344\\271\\260\\350\\216\\267\\350\\265\\2405\\346\\254\\241\" pid:5 \u003e list:\u003cid:4 task_name:\"\\350\\257\\235\\350\\264\\271\\345\\205\\205\\345\\200\\274\" reward:1 type:2 status:1 update_time:\"2020-04-03T14:39:24+08:00\" flag:4 flag_text:\"\\345\\205\\205\\345\\200\\274\" details:\"\\346\\257\\217\\345\\205\\205\\345\\200\\2741\\346\\254\\241\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e list:\u003cid:6 task_name:\"\\345\\256\\214\\346\\210\\220\\351\\227\\256\\345\\215\\267\\350\\260\\203\\346\\237\\245\" reward:1 type:2 status:1 update_time:\"2020-04-03T14:39:24+08:00\" flag:5 flag_text:\"\\345\\216\\273\\345\\256\\214\\346\\210\\220\" details:\"\\351\\246\\226\\346\\254\\241\\345\\256\\214\\346\\210\\220\\350\\260\\203\\346\\237\\245\\351\\227\\256\\345\\215\\267\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e list:\u003cid:2 task_name:\"\\346\\257\\217\\346\\227\\245\\347\\231\\273\\345\\275\\225\" reward:1 type:3 status:1 update_time:\"2020-04-03T14:39:24+08:00\" is_done:true flag:6 flag_text:\"\\346\\230\\216\\346\\227\\245\\345\\206\\215\\346\\235\\245\" details:\"\\346\\257\\217\\345\\244\\251\\350\\216\\267\\350\\265\\2401\\346\\254\\241\" \u003e list:\u003cid:1 task_name:\"\\346\\210\\220\\345\\212\\237\\346\\263\\250\\345\\206\\214\" reward:3 type:1 status:1 update_time:\"2020-04-03T14:39:24+08:00\" is_done:true flag:9 flag_text:\"\\345\\267\\262\\351\\242\\206\\345\\217\\226\" details:\"\\351\\246\\226\\346\\254\\241\\346\\263\\250\\345\\206\\214\\347\\231\\273\\345\\275\\225\\350\\216\\267\\350\\265\\2403\\346\\254\\241\" \u003e  {} [] 1039}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:13:07+08:00"}
2020/7/2 上午11:13:45{"level":"debug","msg":"收到请求消息. lotteryservice.taskdone _INBOX.f1wgDVkWCFgq7xMZZpPo6p.PNydU5SG {413 2 {} [] 0}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:13:45+08:00"}
2020/7/2 上午11:13:45{"level":"info","msg":"sql/app/repository/task_repo.go:18845.785µsSELECT * FROM `mz_task`  WHERE (`mz_task`.`id` = 2) ORDER BY `mz_task`.`id` ASC LIMIT 1[] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:45+08:00"}
2020/7/2 上午11:13:45{"level":"info","msg":"sql/app/repository/task_repo.go:73911.484µsSELECT * FROM `mz_task_user`  WHERE (update_time \u003e ?) AND (`mz_task_user`.`task_id` = ?) AND (`mz_task_user`.`user_id` = ?) ORDER BY `mz_task_user`.`id` ASC LIMIT 1[2020-07-02 2 413] 1","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-02T11:13:45+08:00"}
2020/7/2 上午11:13:45{"level":"warning","msg":"task completed","source":"value.go:321:reflect.Value.Call","time":"2020-07-02T11:13:45+08:00"}
2020/7/2 上午11:13:45{"level":"debug","msg":"消息处理完成. lotteryservice.taskdone_INBOX.f1wgDVkWCFgq7xMZZpPo6p.PNydU5SG{50102 internal err ; task completed \u003cnil\u003e {} [] 35}","source":"value.go:460:reflect.Value.call","time":"2020-07-02T11:13:45+08:00"}
