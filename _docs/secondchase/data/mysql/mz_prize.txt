

mysql> select id,name,prize_status,level,sort,quantity from mz_prize;
+----+--------------------+--------------+-------+------+----------+
| id | name               | prize_status | level | sort | quantity |
+----+--------------------+--------------+-------+------+----------+
|  1 | 特斯拉 Model3      |            1 |     1 |    1 |       10 |
|  2 | iPhone 11 Pro      |            1 |     2 |    3 |      200 |
|  3 | 小米手环4          |            1 |     3 |    6 |     1000 |
|  4 | 秒追定制礼盒       |            1 |     4 |    7 |        0 |
|  5 | 一套医用口罩       |            1 |     5 |    2 |        0 |
|  6 | 再来一次           |            1 |     6 |    5 |        0 |
|  7 | 谢谢参与           |            1 |     7 |    4 |        0 |
+----+--------------------+--------------+-------+------+----------+
7 rows in set (0.00 sec)
mysql>


2020/7/1 上午11:54:35{"level":"info","msg":"开启订阅协程 No. 15","source":"proc.go:203:runtime.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"prizes Redis cache not exist","source":"lucky.go:45:service.InitPrizeList","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"info","msg":"sql/app/repository/prize_repo.go:351.24985msSELECT * FROM `mz_prize`  WHERE (prize_status=?) ORDER BY `sort`[1] 7","source":"scope.go:1045:gorm.(*Scope).trace","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"get prizes from MySQL list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"lucky.go:45:service.InitPrizeList","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"Lucky InitPrizeList 获取奖品list=[{ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1} {ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2} {ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3} {ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4} {ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5} {ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6} {ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}]","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"Lucky InitPrizeList 获取奖品prizeInitList=map[1:{1 特斯拉 Model3 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png 1 10 1 1} 2:{2 iPhone 11 Pro https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png  https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png 1 200 2 3} 3:{3 小米手环4 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png  https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png 1 1000 3 6} 4:{4 秒追定制礼盒 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png  https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png 1 0 4 7} 5:{5 一套医用口罩 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png  https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png 1 0 5 2} 6:{6 再来一次 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png   1 0 6 5} 7:{7 谢谢参与 https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png   1 0 7 4}]","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"Lucky InitPrizeList ------------------","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"tsl={ID:1 Name:特斯拉 Model3 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png ImageUrl2:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png PrizeStatus:1 Quantity:10 Level:1 Sort:1}","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"iphone={ID:2 Name:iPhone 11 Pro ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png PrizeStatus:1 Quantity:200 Level:2 Sort:3}","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"miBand={ID:3 Name:小米手环4 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png PrizeStatus:1 Quantity:1000 Level:3 Sort:6}","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"little={ID:4 Name:秒追定制礼盒 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png PrizeStatus:1 Quantity:0 Level:4 Sort:7}","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"mask={ID:5 Name:一套医用口罩 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png ImageUrl2: ImagePrizeUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png PrizeStatus:1 Quantity:0 Level:5 Sort:2}","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"again={ID:6 Name:再来一次 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:6 Sort:5}","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"thank={ID:7 Name:谢谢参与 ImageUrl:https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png ImageUrl2: ImagePrizeUrl: PrizeStatus:1 Quantity:0 Level:7 Sort:4}","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"Lucky InitPrizeList ------------------","source":"main.go:46:main.main","time":"2020-07-01T11:54:35+08:00"}
2020/7/1 上午11:54:35{"level":"debug","msg":"HowMuch:1","source":"main.go:48:main.main","time":"2020-07-01T11:54:35+08:00"}

127.0.0.1:7001>
127.0.0.1:7001> del lottery:prizes
(integer) 1
127.0.0.1:7001> get lottery:prizes
(nil)
127.0.0.1:7001>
127.0.0.1:7001> get lottery:prizes
"[
    {\"id\":1,\"name\":\"\xe7\x89\xb9\xe6\x96\xaf\xe6\x8b\x89 Model3\",\"image_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3.png\",\"image_url2\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/model3blue.png\",\"image_prize_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/model3prize.png\",\"prize_status\":1,\"quantity\":10,\"level\":1,\"sort\":1},
    {\"id\":5,\"name\":\"\xe4\xb8\x80\xe5\xa5\x97\xe5\x8c\xbb\xe7\x94\xa8\xe5\x8f\xa3\xe7\xbd\xa9\",\"image_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/kouzhao.png\",\"image_url2\":\"\",\"image_prize_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/kouzhaoprize.png\",\"prize_status\":1,\"quantity\":0,\"level\":5,\"sort\":2},
    {\"id\":2,\"name\":\"iPhone 11 Pro\",\"image_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/iphone.png\",\"image_url2\":\"\",\"image_prize_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/iphoneprize.png\",\"prize_status\":1,\"quantity\":200,\"level\":2,\"sort\":3},
    {\"id\":7,\"name\":\"\xe8\xb0\xa2\xe8\xb0\xa2\xe5\x8f\x82\xe4\xb8\x8e\",\"image_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/henyihan.png\",\"image_url2\":\"\",\"image_prize_url\":\"\",\"prize_status\":1,\"quantity\":0,\"level\":7,\"sort\":4},
    {\"id\":6,\"name\":\"\xe5\x86\x8d\xe6\x9d\xa5\xe4\xb8\x80\xe6\xac\xa1\",\"image_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/zailaiyici.png\",\"image_url2\":\"\",\"image_prize_url\":\"\",\"prize_status\":1,\"quantity\":0,\"level\":6,\"sort\":5},
    {\"id\":3,\"name\":\"\xe5\xb0\x8f\xe7\xb1\xb3\xe6\x89\x8b\xe7\x8e\xaf4\",\"image_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/xiaomi.png\",\"image_url2\":\"\",\"image_prize_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/xiaomiprize.png\",\"prize_status\":1,\"quantity\":1000,\"level\":3,\"sort\":6},
    {\"id\":4,\"name\":\"\xe7\xa7\x92\xe8\xbf\xbd\xe5\xae\x9a\xe5\x88\xb6\xe7\xa4\xbc\xe7\x9b\x92\",\"image_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/lihe.png\",\"image_url2\":\"\",\"image_prize_url\":\"https://secondschased.oss-cn-beijing.aliyuncs.com/lottery/prize/liheprize.png\",\"prize_status\":1,\"quantity\":0,\"level\":4,\"sort\":7}
]"
127.0.0.1:7001>
127.0.0.1:7001>
